/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _rogue_game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rogue/game */ \"./src/rogue/game.ts\");\n\r\nwindow.onload = () => {\r\n    var canvas = document.getElementById(\"display\");\r\n    var rogueTS = new _rogue_game__WEBPACK_IMPORTED_MODULE_0__[\"Game\"](canvas);\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluLnRzPzc5NGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2FtZSB9IGZyb20gXCIuL3JvZ3VlL2dhbWVcIjtcclxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICB2YXIgY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzcGxheVwiKTtcclxuICB2YXIgcm9ndWVUUyA9IG5ldyBHYW1lKGNhbnZhcyk7XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main.ts\n");

/***/ }),

/***/ "./src/rogue/actor.ts":
/*!****************************!*\
  !*** ./src/rogue/actor.ts ***!
  \****************************/
/*! exports provided: Player */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Player\", function() { return Player; });\n/* harmony import */ var _geom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geom */ \"./src/rogue/geom.ts\");\n/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./map */ \"./src/rogue/map.ts\");\n/* harmony import */ var _fov__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fov */ \"./src/rogue/fov.ts\");\n\r\n\r\n\r\nclass Player {\r\n    constructor(hp, speed, world, branchName, subMapCoords) {\r\n        this.setVisiblePoint = this.setVisiblePoint.bind(this);\r\n        this.world = world;\r\n        this.branchName = branchName;\r\n        this.subMapCoords = subMapCoords;\r\n        this.subMap = this.world.getBranch(branchName).getMap(subMapCoords);\r\n        this.mapName = this.subMap.getMapType();\r\n        this.hp = hp;\r\n        this.speed = speed;\r\n        this.fov = new _fov__WEBPACK_IMPORTED_MODULE_2__[\"Fov\"](this.subMap.blocksLight, this.setVisiblePoint, this.getDistance);\r\n        this.visiblePoints = [];\r\n        this.pos = this.subMap.getEmptyTile();\r\n        this.fovDistance = 7;\r\n        this.fov.compute(this.pos, this.fovDistance);\r\n    }\r\n    getPos() {\r\n        return this.pos;\r\n    }\r\n    getSubMap() {\r\n        return this.subMap;\r\n    }\r\n    getSubMapCoords() {\r\n        return this.subMapCoords;\r\n    }\r\n    getFov() {\r\n        return this.visiblePoints;\r\n    }\r\n    setVisiblePoint(x, y) {\r\n        let point = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](x, y);\r\n        this.visiblePoints.push(point);\r\n        this.subMap.setVisibleTile(point); //for player only\r\n    }\r\n    getDistance(x, y) {\r\n        return Math.floor(Math.sqrt(x * x + y * y));\r\n    }\r\n    //check if the new subMap exists, return true and set it if it does\r\n    setSubMap(coords) {\r\n        //this only updates the coords for now, since there's only one branch\r\n        const branch = this.world.getBranch(this.branchName);\r\n        if (branch.getMap(coords, this.subMapCoords)) {\r\n            const settedMap = branch.getMap(coords, this.subMapCoords);\r\n            if (settedMap !== this.subMap) {\r\n                this.subMapCoords = coords;\r\n                this.subMap = settedMap;\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        else {\r\n            console.log(\"There's nowhere to go\");\r\n            return false;\r\n        }\r\n    }\r\n    getMapName() {\r\n        return this.mapName;\r\n    }\r\n    move(newDirection) {\r\n        this.visiblePoints = [];\r\n        this.subMap.resetVisibility();\r\n        let tmpPoint = this.pos.clone();\r\n        tmpPoint.x += newDirection.x;\r\n        tmpPoint.y += newDirection.y;\r\n        console.log(tmpPoint);\r\n        let tile = this.subMap.getTileType(tmpPoint);\r\n        switch (tile) {\r\n            case \" \":\r\n                this.pos = tmpPoint;\r\n                this.fov.compute(this.pos, this.fovDistance);\r\n                return true;\r\n            case \"OFFSCREEN\":\r\n                this.enterNewSubMap(newDirection.x, newDirection.y);\r\n        }\r\n        return false;\r\n    }\r\n    enterNewSubMap(newX, newY) {\r\n        const x = this.getSubMapCoords().x;\r\n        const y = this.getSubMapCoords().y;\r\n        const smc = this.getSubMapCoords();\r\n        if (newX > 0 && newY === 0) {\r\n            //right\r\n            const nm = this.setSubMap(new _map__WEBPACK_IMPORTED_MODULE_1__[\"MapCoords\"](smc.x + 1, smc.y, smc.z));\r\n            if (nm) {\r\n                this.pos = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](0, this.pos.getY());\r\n            }\r\n        }\r\n        else if (newX < 0 && newY === 0) {\r\n            //left\r\n            const nm = this.setSubMap(new _map__WEBPACK_IMPORTED_MODULE_1__[\"MapCoords\"](smc.x - 1, smc.y, smc.z));\r\n            if (nm) {\r\n                this.pos = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](this.getSubMap().getWidth() - 1, this.pos.getY());\r\n            }\r\n        }\r\n        else if (newX === 0 && newY < 0) {\r\n            //up\r\n            const nm = this.setSubMap(new _map__WEBPACK_IMPORTED_MODULE_1__[\"MapCoords\"](smc.x, smc.y - 1, smc.z));\r\n            if (nm) {\r\n                this.pos = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](this.pos.getX(), this.getSubMap().getHeight() - 1);\r\n            }\r\n        }\r\n        else if (newX === 0 && newY > 0) {\r\n            //down\r\n            const nm = this.setSubMap(new _map__WEBPACK_IMPORTED_MODULE_1__[\"MapCoords\"](smc.x, smc.y + 1, smc.z));\r\n            if (nm) {\r\n                this.pos = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](this.pos.getX(), 0);\r\n            }\r\n        }\r\n        this.fov.compute(this.pos, this.fovDistance);\r\n        console.log(`new subMap entered: ${this.getSubMapCoords().x}, ${this.getSubMapCoords().y} ${this.getSubMapCoords().z}}`);\r\n        console.log(`position: ${this.pos.getX()}, ${this.getPos().y}`);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvYWN0b3IudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcm9ndWUvYWN0b3IudHM/ZjM0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBnZW9tIGZyb20gXCIuL2dlb21cIjtcclxuaW1wb3J0ICogYXMgbWFwIGZyb20gXCIuL21hcFwiO1xyXG5pbXBvcnQgeyBNYXBDb29yZHMgfSBmcm9tIFwiLi9tYXBcIjtcclxuaW1wb3J0ICogYXMgZm92IGZyb20gXCIuL2ZvdlwiO1xyXG5pbXBvcnQgeyBNYXBTZWxlY3RvciB9IGZyb20gXCIuL21hcFNlbGVjdG9yXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFjdG9yIHtcclxuICBtb3ZlKG5ld0RpcmVjdGlvbjogZ2VvbS5Qb2ludCk6IGJvb2xlYW47XHJcbiAgZ2V0Rm92KCk6IGdlb20uUG9pbnRbXTtcclxuICBzZXRWaXNpYmxlUG9pbnQoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICBmb3Y6IGZvdi5Gb3Y7XHJcbiAgdmlzaWJsZVBvaW50czogZ2VvbS5Qb2ludFtdO1xyXG4gIGhwOiBudW1iZXI7XHJcbiAgc3BlZWQ6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIElMb2NhdGFibGUge1xyXG4gIHN1Yk1hcDogbWFwLklNYXA7XHJcbiAgc3ViTWFwQ29vcmRzOiBtYXAuTWFwQ29vcmRzO1xyXG4gIG1hcE5hbWU6IHN0cmluZztcclxuICBwb3M6IGdlb20uUG9pbnQ7XHJcblxyXG4gIGdldFN1Yk1hcCgpOiBtYXAuSU1hcDtcclxuICBnZXRNYXBOYW1lKCk6IHN0cmluZztcclxuICBnZXRTdWJNYXBDb29yZHMoKTogbWFwLk1hcENvb3JkcztcclxuICBnZXRQb3MoKTogZ2VvbS5Qb2ludDtcclxuICBtb3ZlKG5ld1BvczogZ2VvbS5Qb2ludCk6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5ZXIgaW1wbGVtZW50cyBBY3RvciwgSUxvY2F0YWJsZSB7XHJcbiAgd29ybGQ6IG1hcC5Xb3JsZDtcclxuICBicmFuY2hOYW1lOiBzdHJpbmc7XHJcbiAgbWFwTmFtZTogc3RyaW5nO1xyXG4gIHN1Yk1hcDogbWFwLklNYXA7XHJcbiAgc3ViTWFwQ29vcmRzOiBtYXAuTWFwQ29vcmRzO1xyXG4gIHBvczogZ2VvbS5Qb2ludDtcclxuXHJcbiAgdmlzaWJsZVBvaW50czogZ2VvbS5Qb2ludFtdO1xyXG4gIGZvdjogZm92LkZvdjtcclxuICBmb3ZEaXN0YW5jZTogbnVtYmVyO1xyXG4gIGhwOiBudW1iZXI7XHJcbiAgc3BlZWQ6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoaHAsIHNwZWVkLCB3b3JsZCwgYnJhbmNoTmFtZSwgc3ViTWFwQ29vcmRzKSB7XHJcbiAgICB0aGlzLnNldFZpc2libGVQb2ludCA9IHRoaXMuc2V0VmlzaWJsZVBvaW50LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XHJcbiAgICB0aGlzLmJyYW5jaE5hbWUgPSBicmFuY2hOYW1lO1xyXG4gICAgdGhpcy5zdWJNYXBDb29yZHMgPSBzdWJNYXBDb29yZHM7XHJcbiAgICB0aGlzLnN1Yk1hcCA9IHRoaXMud29ybGQuZ2V0QnJhbmNoKGJyYW5jaE5hbWUpLmdldE1hcChzdWJNYXBDb29yZHMpO1xyXG4gICAgdGhpcy5tYXBOYW1lID0gdGhpcy5zdWJNYXAuZ2V0TWFwVHlwZSgpO1xyXG4gICAgdGhpcy5ocCA9IGhwO1xyXG4gICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgdGhpcy5mb3YgPSBuZXcgZm92LkZvdihcclxuICAgICAgdGhpcy5zdWJNYXAuYmxvY2tzTGlnaHQsXHJcbiAgICAgIHRoaXMuc2V0VmlzaWJsZVBvaW50LFxyXG4gICAgICB0aGlzLmdldERpc3RhbmNlXHJcbiAgICApO1xyXG4gICAgdGhpcy52aXNpYmxlUG9pbnRzID0gW107XHJcbiAgICB0aGlzLnBvcyA9IHRoaXMuc3ViTWFwLmdldEVtcHR5VGlsZSgpO1xyXG4gICAgdGhpcy5mb3ZEaXN0YW5jZSA9IDc7XHJcbiAgICB0aGlzLmZvdi5jb21wdXRlKHRoaXMucG9zLCB0aGlzLmZvdkRpc3RhbmNlKTtcclxuICB9XHJcblxyXG4gIGdldFBvcygpOiBnZW9tLlBvaW50IHtcclxuICAgIHJldHVybiB0aGlzLnBvcztcclxuICB9XHJcblxyXG4gIGdldFN1Yk1hcCgpOiBtYXAuSU1hcCB7XHJcbiAgICByZXR1cm4gdGhpcy5zdWJNYXA7XHJcbiAgfVxyXG5cclxuICBnZXRTdWJNYXBDb29yZHMoKTogbWFwLk1hcENvb3JkcyB7XHJcbiAgICByZXR1cm4gdGhpcy5zdWJNYXBDb29yZHM7XHJcbiAgfVxyXG5cclxuICBnZXRGb3YoKTogZ2VvbS5Qb2ludFtdIHtcclxuICAgIHJldHVybiB0aGlzLnZpc2libGVQb2ludHM7XHJcbiAgfVxyXG5cclxuICBzZXRWaXNpYmxlUG9pbnQoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGxldCBwb2ludDogZ2VvbS5Qb2ludCA9IG5ldyBnZW9tLlBvaW50KHgsIHkpO1xyXG4gICAgdGhpcy52aXNpYmxlUG9pbnRzLnB1c2gocG9pbnQpO1xyXG4gICAgdGhpcy5zdWJNYXAuc2V0VmlzaWJsZVRpbGUocG9pbnQpOyAvL2ZvciBwbGF5ZXIgb25seVxyXG4gIH1cclxuXHJcbiAgZ2V0RGlzdGFuY2UoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpKTtcclxuICB9XHJcblxyXG4gIC8vY2hlY2sgaWYgdGhlIG5ldyBzdWJNYXAgZXhpc3RzLCByZXR1cm4gdHJ1ZSBhbmQgc2V0IGl0IGlmIGl0IGRvZXNcclxuICBzZXRTdWJNYXAoY29vcmRzOiBtYXAuTWFwQ29vcmRzKTogYm9vbGVhbiB7XHJcbiAgICAvL3RoaXMgb25seSB1cGRhdGVzIHRoZSBjb29yZHMgZm9yIG5vdywgc2luY2UgdGhlcmUncyBvbmx5IG9uZSBicmFuY2hcclxuICAgIGNvbnN0IGJyYW5jaCA9IHRoaXMud29ybGQuZ2V0QnJhbmNoKHRoaXMuYnJhbmNoTmFtZSk7XHJcbiAgICBpZiAoYnJhbmNoLmdldE1hcChjb29yZHMsIHRoaXMuc3ViTWFwQ29vcmRzKSkge1xyXG4gICAgICBjb25zdCBzZXR0ZWRNYXAgPSBicmFuY2guZ2V0TWFwKGNvb3JkcywgdGhpcy5zdWJNYXBDb29yZHMpO1xyXG4gICAgICBpZiAoc2V0dGVkTWFwICE9PSB0aGlzLnN1Yk1hcCkge1xyXG4gICAgICAgIHRoaXMuc3ViTWFwQ29vcmRzID0gY29vcmRzO1xyXG4gICAgICAgIHRoaXMuc3ViTWFwID0gc2V0dGVkTWFwO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiVGhlcmUncyBub3doZXJlIHRvIGdvXCIpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRNYXBOYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5tYXBOYW1lO1xyXG4gIH1cclxuXHJcbiAgbW92ZShuZXdEaXJlY3Rpb246IGdlb20uUG9pbnQpOiBib29sZWFuIHtcclxuICAgIHRoaXMudmlzaWJsZVBvaW50cyA9IFtdO1xyXG4gICAgdGhpcy5zdWJNYXAucmVzZXRWaXNpYmlsaXR5KCk7XHJcbiAgICBsZXQgdG1wUG9pbnQ6IGdlb20uUG9pbnQgPSB0aGlzLnBvcy5jbG9uZSgpO1xyXG4gICAgdG1wUG9pbnQueCArPSBuZXdEaXJlY3Rpb24ueDtcclxuICAgIHRtcFBvaW50LnkgKz0gbmV3RGlyZWN0aW9uLnk7XHJcbiAgICBjb25zb2xlLmxvZyh0bXBQb2ludCk7XHJcblxyXG4gICAgbGV0IHRpbGU6IHN0cmluZyA9IHRoaXMuc3ViTWFwLmdldFRpbGVUeXBlKHRtcFBvaW50KTtcclxuICAgIHN3aXRjaCAodGlsZSkge1xyXG4gICAgICBjYXNlIFwiIFwiOlxyXG4gICAgICAgIHRoaXMucG9zID0gdG1wUG9pbnQ7XHJcbiAgICAgICAgdGhpcy5mb3YuY29tcHV0ZSh0aGlzLnBvcywgdGhpcy5mb3ZEaXN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIGNhc2UgXCJPRkZTQ1JFRU5cIjpcclxuICAgICAgICB0aGlzLmVudGVyTmV3U3ViTWFwKG5ld0RpcmVjdGlvbi54LCBuZXdEaXJlY3Rpb24ueSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBlbnRlck5ld1N1Yk1hcChuZXdYLCBuZXdZKSB7XHJcbiAgICBjb25zdCB4ID0gdGhpcy5nZXRTdWJNYXBDb29yZHMoKS54O1xyXG4gICAgY29uc3QgeSA9IHRoaXMuZ2V0U3ViTWFwQ29vcmRzKCkueTtcclxuICAgIGNvbnN0IHNtYyA9IHRoaXMuZ2V0U3ViTWFwQ29vcmRzKCk7XHJcbiAgICBpZiAobmV3WCA+IDAgJiYgbmV3WSA9PT0gMCkge1xyXG4gICAgICAvL3JpZ2h0XHJcbiAgICAgIGNvbnN0IG5tID0gdGhpcy5zZXRTdWJNYXAobmV3IG1hcC5NYXBDb29yZHMoc21jLnggKyAxLCBzbWMueSwgc21jLnopKTtcclxuICAgICAgaWYgKG5tKSB7XHJcbiAgICAgICAgdGhpcy5wb3MgPSBuZXcgZ2VvbS5Qb2ludCgwLCB0aGlzLnBvcy5nZXRZKCkpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG5ld1ggPCAwICYmIG5ld1kgPT09IDApIHtcclxuICAgICAgLy9sZWZ0XHJcbiAgICAgIGNvbnN0IG5tID0gdGhpcy5zZXRTdWJNYXAobmV3IG1hcC5NYXBDb29yZHMoc21jLnggLSAxLCBzbWMueSwgc21jLnopKTtcclxuICAgICAgaWYgKG5tKSB7XHJcbiAgICAgICAgdGhpcy5wb3MgPSBuZXcgZ2VvbS5Qb2ludChcclxuICAgICAgICAgIHRoaXMuZ2V0U3ViTWFwKCkuZ2V0V2lkdGgoKSAtIDEsXHJcbiAgICAgICAgICB0aGlzLnBvcy5nZXRZKClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG5ld1ggPT09IDAgJiYgbmV3WSA8IDApIHtcclxuICAgICAgLy91cFxyXG4gICAgICBjb25zdCBubSA9IHRoaXMuc2V0U3ViTWFwKG5ldyBtYXAuTWFwQ29vcmRzKHNtYy54LCBzbWMueSAtIDEsIHNtYy56KSk7XHJcbiAgICAgIGlmIChubSkge1xyXG4gICAgICAgIHRoaXMucG9zID0gbmV3IGdlb20uUG9pbnQoXHJcbiAgICAgICAgICB0aGlzLnBvcy5nZXRYKCksXHJcbiAgICAgICAgICB0aGlzLmdldFN1Yk1hcCgpLmdldEhlaWdodCgpIC0gMVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobmV3WCA9PT0gMCAmJiBuZXdZID4gMCkge1xyXG4gICAgICAvL2Rvd25cclxuICAgICAgY29uc3Qgbm0gPSB0aGlzLnNldFN1Yk1hcChuZXcgbWFwLk1hcENvb3JkcyhzbWMueCwgc21jLnkgKyAxLCBzbWMueikpO1xyXG4gICAgICBpZiAobm0pIHtcclxuICAgICAgICB0aGlzLnBvcyA9IG5ldyBnZW9tLlBvaW50KHRoaXMucG9zLmdldFgoKSwgMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmZvdi5jb21wdXRlKHRoaXMucG9zLCB0aGlzLmZvdkRpc3RhbmNlKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgYG5ldyBzdWJNYXAgZW50ZXJlZDogJHt0aGlzLmdldFN1Yk1hcENvb3JkcygpLnh9LCAke1xyXG4gICAgICAgIHRoaXMuZ2V0U3ViTWFwQ29vcmRzKCkueVxyXG4gICAgICB9ICR7dGhpcy5nZXRTdWJNYXBDb29yZHMoKS56fX1gXHJcbiAgICApO1xyXG4gICAgY29uc29sZS5sb2coYHBvc2l0aW9uOiAke3RoaXMucG9zLmdldFgoKX0sICR7dGhpcy5nZXRQb3MoKS55fWApO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/rogue/actor.ts\n");

/***/ }),

/***/ "./src/rogue/fov.ts":
/*!**************************!*\
  !*** ./src/rogue/fov.ts ***!
  \**************************/
/*! exports provided: Fov */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Fov\", function() { return Fov; });\nclass Fov {\r\n    constructor(blocksLight, setVisible, getDistance) {\r\n        this._blocksLight = blocksLight;\r\n        this._setVisible = setVisible;\r\n        this.getDistance = getDistance;\r\n    }\r\n    compute(origin, rangeLimit, octant, x, top, bottom) {\r\n        //I think TS supports some sort of method overloading, but this if statement works for now ig\r\n        if (!octant && !x && !top && !bottom) {\r\n            this._setVisible(origin.getX(), origin.getY());\r\n            for (let octant = 0; octant < 8; octant++) {\r\n                this.compute(origin, rangeLimit, octant, 1, new Slope(1, 1), new Slope(0, 1));\r\n            }\r\n        }\r\n        else {\r\n            for (; x <= rangeLimit; x++) {\r\n                let topY;\r\n                if (top.getX() === 1) {\r\n                    topY = x;\r\n                }\r\n                else {\r\n                    topY = Math.floor(((x * 2 - 1) * top.getY() + top.getX()) / (top.getX() * 2));\r\n                    if (this.blocksLight(x, topY, octant, origin)) {\r\n                        if (top.greaterOrEqual(topY * 2 + 1, x * 2) &&\r\n                            !this.blocksLight(x, topY + 1, octant, origin)) {\r\n                            topY++;\r\n                        }\r\n                    }\r\n                    else {\r\n                        let ax = x * 2;\r\n                        if (this.blocksLight(x + 1, topY + 1, octant, origin)) {\r\n                            ax++;\r\n                        }\r\n                        if (top.greater(topY * 2 + 1, ax)) {\r\n                            topY++;\r\n                        }\r\n                    }\r\n                }\r\n                let bottomY;\r\n                if (bottom.getY() === 0) {\r\n                    bottomY = 0;\r\n                }\r\n                else {\r\n                    bottomY = Math.floor(((x * 2 - 1) * bottom.getY() + bottom.getX()) / (bottom.getX() * 2));\r\n                    if (bottom.greaterOrEqual(bottomY * 2 + 1, x * 2) &&\r\n                        this.blocksLight(x, bottomY, octant, origin) &&\r\n                        !this.blocksLight(x, bottomY + 1, octant, origin)) {\r\n                        bottomY++;\r\n                    }\r\n                }\r\n                let wasOpaque = -1; //0:false, 1:true, -1:n/a\r\n                for (let y = topY; y >= bottomY; y--) {\r\n                    if (rangeLimit < 0 || this.getDistance(x, y) <= rangeLimit) {\r\n                        let isOpaque = this.blocksLight(x, y, octant, origin);\r\n                        let isVisible = isOpaque ||\r\n                            ((y != topY || top.greater(y * 4 - 1, x * 4 + 1)) &&\r\n                                (y != bottomY || bottom.less(y * 4 + 1, x * 4 - 1)));\r\n                        if (isVisible === true) {\r\n                            this.setVisible(x, y, octant, origin);\r\n                        }\r\n                        if (x != rangeLimit) {\r\n                            if (isOpaque === true) {\r\n                                if (wasOpaque === 0) {\r\n                                    let nx = x * 2;\r\n                                    let ny = y * 2 + 1;\r\n                                    if (this.blocksLight(x, y + 1, octant, origin)) {\r\n                                        nx--;\r\n                                    }\r\n                                    if (top.greater(ny, nx)) {\r\n                                        if (y === bottomY) {\r\n                                            bottom = new Slope(ny, nx);\r\n                                            break;\r\n                                        }\r\n                                        else {\r\n                                            this.compute(origin, rangeLimit, octant, x + 1, top, new Slope(ny, nx));\r\n                                        }\r\n                                    }\r\n                                    else {\r\n                                        if (y === bottomY) {\r\n                                            return; //end of recursion\r\n                                        }\r\n                                    }\r\n                                }\r\n                                wasOpaque = 1;\r\n                            }\r\n                            else {\r\n                                if (wasOpaque > 0) {\r\n                                    let nx = x * 2;\r\n                                    let ny = y * 2 + 1;\r\n                                    if (this.blocksLight(x + 1, y + 1, octant, origin)) {\r\n                                        nx++;\r\n                                    }\r\n                                    if (bottom.greaterOrEqual(ny, nx)) {\r\n                                        return;\r\n                                    }\r\n                                    top = new Slope(ny, nx);\r\n                                }\r\n                                wasOpaque = 0;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (wasOpaque !== 0) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    blocksLight(x, y, octant, origin) {\r\n        let nx = origin.getX();\r\n        let ny = origin.getY();\r\n        switch (octant) {\r\n            case 0:\r\n                nx += x;\r\n                ny -= y;\r\n                break;\r\n            case 1:\r\n                nx += y;\r\n                ny -= x;\r\n                break;\r\n            case 2:\r\n                nx -= y;\r\n                ny -= x;\r\n                break;\r\n            case 3:\r\n                nx -= x;\r\n                ny -= y;\r\n                break;\r\n            case 4:\r\n                nx -= x;\r\n                ny += y;\r\n                break;\r\n            case 5:\r\n                nx -= y;\r\n                ny += x;\r\n                break;\r\n            case 6:\r\n                nx += y;\r\n                ny += x;\r\n                break;\r\n            case 7:\r\n                nx += x;\r\n                ny += y;\r\n                break;\r\n        }\r\n        return this._blocksLight(nx, ny);\r\n    }\r\n    setVisible(x, y, octant, origin) {\r\n        let nx = origin.getX();\r\n        let ny = origin.getY();\r\n        switch (octant) {\r\n            case 0:\r\n                nx += x;\r\n                ny -= y;\r\n                break;\r\n            case 1:\r\n                nx += y;\r\n                ny -= x;\r\n                break;\r\n            case 2:\r\n                nx -= y;\r\n                ny -= x;\r\n                break;\r\n            case 3:\r\n                nx -= x;\r\n                ny -= y;\r\n                break;\r\n            case 4:\r\n                nx -= x;\r\n                ny += y;\r\n                break;\r\n            case 5:\r\n                nx -= y;\r\n                ny += x;\r\n                break;\r\n            case 6:\r\n                nx += y;\r\n                ny += x;\r\n                break;\r\n            case 7:\r\n                nx += x;\r\n                ny += y;\r\n                break;\r\n        }\r\n        return this._setVisible(nx, ny);\r\n    }\r\n}\r\nclass Slope {\r\n    constructor(y, x) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    greater(y, x) {\r\n        return this.y * x > this.x * y;\r\n    }\r\n    greaterOrEqual(y, x) {\r\n        return this.y * x >= this.x * y;\r\n    }\r\n    less(y, x) {\r\n        return this.y * x < this.x * y;\r\n    }\r\n    getX() {\r\n        return this.x;\r\n    }\r\n    getY() {\r\n        return this.y;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvZm92LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3JvZ3VlL2Zvdi50cz9mNzIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vc2VlICBodHRwOi8vd3d3LmFkYW1taWwubmV0L2Jsb2cvdjEyNV9Sb2d1ZWxpa2VfVmlzaW9uX0FsZ29yaXRobXMuaHRtbCNteWNvZGVcclxuaW1wb3J0ICogYXMgZ2VvbSBmcm9tIFwiLi9nZW9tXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRm92IHtcclxuICBfYmxvY2tzTGlnaHQ6IEZ1bmN0aW9uO1xyXG4gIF9zZXRWaXNpYmxlOiBGdW5jdGlvbjtcclxuICBnZXREaXN0YW5jZTogRnVuY3Rpb247XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBibG9ja3NMaWdodDogRnVuY3Rpb24sXHJcbiAgICBzZXRWaXNpYmxlOiBGdW5jdGlvbixcclxuICAgIGdldERpc3RhbmNlOiBGdW5jdGlvblxyXG4gICkge1xyXG4gICAgdGhpcy5fYmxvY2tzTGlnaHQgPSBibG9ja3NMaWdodDtcclxuICAgIHRoaXMuX3NldFZpc2libGUgPSBzZXRWaXNpYmxlO1xyXG4gICAgdGhpcy5nZXREaXN0YW5jZSA9IGdldERpc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNvbXB1dGUoXHJcbiAgICBvcmlnaW46IGdlb20uUG9pbnQsXHJcbiAgICByYW5nZUxpbWl0OiBudW1iZXIsXHJcbiAgICBvY3RhbnQ/OiBudW1iZXIsXHJcbiAgICB4PzogbnVtYmVyLFxyXG4gICAgdG9wPzogU2xvcGUsXHJcbiAgICBib3R0b20/OiBTbG9wZVxyXG4gICk6IHZvaWQge1xyXG4gICAgLy9JIHRoaW5rIFRTIHN1cHBvcnRzIHNvbWUgc29ydCBvZiBtZXRob2Qgb3ZlcmxvYWRpbmcsIGJ1dCB0aGlzIGlmIHN0YXRlbWVudCB3b3JrcyBmb3Igbm93IGlnXHJcbiAgICBpZiAoIW9jdGFudCAmJiAheCAmJiAhdG9wICYmICFib3R0b20pIHtcclxuICAgICAgdGhpcy5fc2V0VmlzaWJsZShvcmlnaW4uZ2V0WCgpLCBvcmlnaW4uZ2V0WSgpKTtcclxuICAgICAgZm9yIChsZXQgb2N0YW50OiBudW1iZXIgPSAwOyBvY3RhbnQgPCA4OyBvY3RhbnQrKykge1xyXG4gICAgICAgIHRoaXMuY29tcHV0ZShcclxuICAgICAgICAgIG9yaWdpbixcclxuICAgICAgICAgIHJhbmdlTGltaXQsXHJcbiAgICAgICAgICBvY3RhbnQsXHJcbiAgICAgICAgICAxLFxyXG4gICAgICAgICAgbmV3IFNsb3BlKDEsIDEpLFxyXG4gICAgICAgICAgbmV3IFNsb3BlKDAsIDEpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yICg7IHggPD0gcmFuZ2VMaW1pdDsgeCsrKSB7XHJcbiAgICAgICAgbGV0IHRvcFk6IG51bWJlcjtcclxuICAgICAgICBpZiAodG9wLmdldFgoKSA9PT0gMSkge1xyXG4gICAgICAgICAgdG9wWSA9IHg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRvcFkgPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICAoKHggKiAyIC0gMSkgKiB0b3AuZ2V0WSgpICsgdG9wLmdldFgoKSkgLyAodG9wLmdldFgoKSAqIDIpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaWYgKHRoaXMuYmxvY2tzTGlnaHQoeCwgdG9wWSwgb2N0YW50LCBvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB0b3AuZ3JlYXRlck9yRXF1YWwodG9wWSAqIDIgKyAxLCB4ICogMikgJiZcclxuICAgICAgICAgICAgICAhdGhpcy5ibG9ja3NMaWdodCh4LCB0b3BZICsgMSwgb2N0YW50LCBvcmlnaW4pXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHRvcFkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGF4OiBudW1iZXIgPSB4ICogMjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmxvY2tzTGlnaHQoeCArIDEsIHRvcFkgKyAxLCBvY3RhbnQsIG9yaWdpbikpIHtcclxuICAgICAgICAgICAgICBheCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0b3AuZ3JlYXRlcih0b3BZICogMiArIDEsIGF4KSkge1xyXG4gICAgICAgICAgICAgIHRvcFkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGJvdHRvbVk6IG51bWJlcjtcclxuICAgICAgICBpZiAoYm90dG9tLmdldFkoKSA9PT0gMCkge1xyXG4gICAgICAgICAgYm90dG9tWSA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJvdHRvbVkgPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICAoKHggKiAyIC0gMSkgKiBib3R0b20uZ2V0WSgpICsgYm90dG9tLmdldFgoKSkgLyAoYm90dG9tLmdldFgoKSAqIDIpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBib3R0b20uZ3JlYXRlck9yRXF1YWwoYm90dG9tWSAqIDIgKyAxLCB4ICogMikgJiZcclxuICAgICAgICAgICAgdGhpcy5ibG9ja3NMaWdodCh4LCBib3R0b21ZLCBvY3RhbnQsIG9yaWdpbikgJiZcclxuICAgICAgICAgICAgIXRoaXMuYmxvY2tzTGlnaHQoeCwgYm90dG9tWSArIDEsIG9jdGFudCwgb3JpZ2luKVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGJvdHRvbVkrKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB3YXNPcGFxdWU6IG51bWJlciA9IC0xOyAvLzA6ZmFsc2UsIDE6dHJ1ZSwgLTE6bi9hXHJcbiAgICAgICAgZm9yIChsZXQgeTogbnVtYmVyID0gdG9wWTsgeSA+PSBib3R0b21ZOyB5LS0pIHtcclxuICAgICAgICAgIGlmIChyYW5nZUxpbWl0IDwgMCB8fCB0aGlzLmdldERpc3RhbmNlKHgsIHkpIDw9IHJhbmdlTGltaXQpIHtcclxuICAgICAgICAgICAgbGV0IGlzT3BhcXVlOiBib29sZWFuID0gdGhpcy5ibG9ja3NMaWdodCh4LCB5LCBvY3RhbnQsIG9yaWdpbik7XHJcbiAgICAgICAgICAgIGxldCBpc1Zpc2libGU6IGJvb2xlYW4gPVxyXG4gICAgICAgICAgICAgIGlzT3BhcXVlIHx8XHJcbiAgICAgICAgICAgICAgKCh5ICE9IHRvcFkgfHwgdG9wLmdyZWF0ZXIoeSAqIDQgLSAxLCB4ICogNCArIDEpKSAmJlxyXG4gICAgICAgICAgICAgICAgKHkgIT0gYm90dG9tWSB8fCBib3R0b20ubGVzcyh5ICogNCArIDEsIHggKiA0IC0gMSkpKTtcclxuICAgICAgICAgICAgaWYgKGlzVmlzaWJsZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZSh4LCB5LCBvY3RhbnQsIG9yaWdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggIT0gcmFuZ2VMaW1pdCkge1xyXG4gICAgICAgICAgICAgIGlmIChpc09wYXF1ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdhc09wYXF1ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgbng6IG51bWJlciA9IHggKiAyO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgbnk6IG51bWJlciA9IHkgKiAyICsgMTtcclxuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmxvY2tzTGlnaHQoeCwgeSArIDEsIG9jdGFudCwgb3JpZ2luKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG54LS07XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgaWYgKHRvcC5ncmVhdGVyKG55LCBueCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeSA9PT0gYm90dG9tWSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0gbmV3IFNsb3BlKG55LCBueCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlTGltaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9jdGFudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeCArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFNsb3BlKG55LCBueClcclxuICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh5ID09PSBib3R0b21ZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vZW5kIG9mIHJlY3Vyc2lvblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgd2FzT3BhcXVlID0gMTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdhc09wYXF1ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IG54OiBudW1iZXIgPSB4ICogMjtcclxuICAgICAgICAgICAgICAgICAgbGV0IG55OiBudW1iZXIgPSB5ICogMiArIDE7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJsb2Nrc0xpZ2h0KHggKyAxLCB5ICsgMSwgb2N0YW50LCBvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbngrKztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBpZiAoYm90dG9tLmdyZWF0ZXJPckVxdWFsKG55LCBueCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgdG9wID0gbmV3IFNsb3BlKG55LCBueCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB3YXNPcGFxdWUgPSAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2FzT3BhcXVlICE9PSAwKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYmxvY2tzTGlnaHQoXHJcbiAgICB4OiBudW1iZXIsXHJcbiAgICB5OiBudW1iZXIsXHJcbiAgICBvY3RhbnQ6IG51bWJlcixcclxuICAgIG9yaWdpbjogZ2VvbS5Qb2ludFxyXG4gICk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IG54OiBudW1iZXIgPSBvcmlnaW4uZ2V0WCgpO1xyXG4gICAgbGV0IG55OiBudW1iZXIgPSBvcmlnaW4uZ2V0WSgpO1xyXG5cclxuICAgIHN3aXRjaCAob2N0YW50KSB7XHJcbiAgICAgIGNhc2UgMDpcclxuICAgICAgICBueCArPSB4O1xyXG4gICAgICAgIG55IC09IHk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICBueCArPSB5O1xyXG4gICAgICAgIG55IC09IHg7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMjpcclxuICAgICAgICBueCAtPSB5O1xyXG4gICAgICAgIG55IC09IHg7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICBueCAtPSB4O1xyXG4gICAgICAgIG55IC09IHk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNDpcclxuICAgICAgICBueCAtPSB4O1xyXG4gICAgICAgIG55ICs9IHk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNTpcclxuICAgICAgICBueCAtPSB5O1xyXG4gICAgICAgIG55ICs9IHg7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNjpcclxuICAgICAgICBueCArPSB5O1xyXG4gICAgICAgIG55ICs9IHg7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNzpcclxuICAgICAgICBueCArPSB4O1xyXG4gICAgICAgIG55ICs9IHk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fYmxvY2tzTGlnaHQobngsIG55KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VmlzaWJsZShcclxuICAgIHg6IG51bWJlcixcclxuICAgIHk6IG51bWJlcixcclxuICAgIG9jdGFudDogbnVtYmVyLFxyXG4gICAgb3JpZ2luOiBnZW9tLlBvaW50XHJcbiAgKTogdm9pZCB7XHJcbiAgICBsZXQgbng6IG51bWJlciA9IG9yaWdpbi5nZXRYKCk7XHJcbiAgICBsZXQgbnk6IG51bWJlciA9IG9yaWdpbi5nZXRZKCk7XHJcblxyXG4gICAgc3dpdGNoIChvY3RhbnQpIHtcclxuICAgICAgY2FzZSAwOlxyXG4gICAgICAgIG54ICs9IHg7XHJcbiAgICAgICAgbnkgLT0geTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAxOlxyXG4gICAgICAgIG54ICs9IHk7XHJcbiAgICAgICAgbnkgLT0geDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAyOlxyXG4gICAgICAgIG54IC09IHk7XHJcbiAgICAgICAgbnkgLT0geDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAzOlxyXG4gICAgICAgIG54IC09IHg7XHJcbiAgICAgICAgbnkgLT0geTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA0OlxyXG4gICAgICAgIG54IC09IHg7XHJcbiAgICAgICAgbnkgKz0geTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA1OlxyXG4gICAgICAgIG54IC09IHk7XHJcbiAgICAgICAgbnkgKz0geDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA2OlxyXG4gICAgICAgIG54ICs9IHk7XHJcbiAgICAgICAgbnkgKz0geDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA3OlxyXG4gICAgICAgIG54ICs9IHg7XHJcbiAgICAgICAgbnkgKz0geTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9zZXRWaXNpYmxlKG54LCBueSk7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBTbG9wZSB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuICBjb25zdHJ1Y3Rvcih5OiBudW1iZXIsIHg6IG51bWJlcikge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ3JlYXRlcih5OiBudW1iZXIsIHg6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMueSAqIHggPiB0aGlzLnggKiB5O1xyXG4gIH1cclxuICBwdWJsaWMgZ3JlYXRlck9yRXF1YWwoeTogbnVtYmVyLCB4OiBudW1iZXIpIHtcclxuICAgIHJldHVybiB0aGlzLnkgKiB4ID49IHRoaXMueCAqIHk7XHJcbiAgfVxyXG4gIHB1YmxpYyBsZXNzKHk6IG51bWJlciwgeDogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gdGhpcy55ICogeCA8IHRoaXMueCAqIHk7XHJcbiAgfVxyXG4gIHB1YmxpYyBnZXRYKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy54O1xyXG4gIH1cclxuICBwdWJsaWMgZ2V0WSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMueTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/rogue/fov.ts\n");

/***/ }),

/***/ "./src/rogue/game.ts":
/*!***************************!*\
  !*** ./src/rogue/game.ts ***!
  \***************************/
/*! exports provided: Game */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Game\", function() { return Game; });\n/* harmony import */ var _geom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geom */ \"./src/rogue/geom.ts\");\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderer */ \"./src/rogue/renderer.ts\");\n/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ \"./src/rogue/map.ts\");\n/* harmony import */ var _mapSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mapSelector */ \"./src/rogue/mapSelector.ts\");\n/* harmony import */ var _actor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./actor */ \"./src/rogue/actor.ts\");\n/* harmony import */ var _input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./input */ \"./src/rogue/input.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass Game {\r\n    constructor(display) {\r\n        this.display = display;\r\n        this.invalid = true;\r\n        this.renderer = new _renderer__WEBPACK_IMPORTED_MODULE_1__[\"CanvasMapRenderer\"](this.display, new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Rectangle\"](0, 0, 20, 20));\r\n        this.input = new _input__WEBPACK_IMPORTED_MODULE_5__[\"Input\"]();\r\n        this.world = new _map__WEBPACK_IMPORTED_MODULE_2__[\"World\"]();\r\n        this.player = new _actor__WEBPACK_IMPORTED_MODULE_4__[\"Player\"](10, 1.0, this.world, \"forest\", //TODO: make branch names an enum\r\n        new _map__WEBPACK_IMPORTED_MODULE_2__[\"MapCoords\"](1, 1, 0));\r\n        console.log(this.player.getSubMap());\r\n        console.log(this.player.getMapName());\r\n        this.currentMap = this.world.getMap(this.player.getSubMap().getMapType(), this.player.getSubMapCoords());\r\n        this.mapSelector = new _mapSelector__WEBPACK_IMPORTED_MODULE_3__[\"MapSelector\"](this.currentMap);\r\n        var gameloop = () => {\r\n            this.update();\r\n            requestAnimationFrame(gameloop);\r\n        };\r\n        gameloop();\r\n    }\r\n    update() {\r\n        if (this.input.newDirection) {\r\n            this.invalid = this.player.move(this.input.newDirection);\r\n            this.input.clear();\r\n        }\r\n        //if the player has moved to a new subMap, select it\r\n        if (this.currentMap !== this.player.getSubMap()) {\r\n            this.currentMap = this.player.getSubMap();\r\n            this.mapSelector = new _mapSelector__WEBPACK_IMPORTED_MODULE_3__[\"MapSelector\"](this.player.getSubMap());\r\n            this.draw();\r\n        }\r\n        if (this.invalid) {\r\n            this.draw();\r\n        }\r\n    }\r\n    draw() {\r\n        let viewRadius = 20;\r\n        let subMapTiles = this.mapSelector.getSubMapTiles(viewRadius, this.player.getPos().getX(), this.player.getPos().getY());\r\n        let seenSubMap = this.mapSelector.getSubMapTiles(viewRadius, this.player.getPos().getX(), this.player.getPos().getY());\r\n        // console.log(subMapTiles);\r\n        let topLeft = [\r\n            this.player.getPos().getX() - viewRadius,\r\n            this.player.getPos().getY() - viewRadius,\r\n        ];\r\n        let countY = 0;\r\n        let countX = 0;\r\n        for (let y = Math.max(this.player.getPos().getY() - viewRadius, 0); y < this.player.getPos().getY() + viewRadius + 1; y++) {\r\n            for (let x = Math.max(this.player.getPos().getX() - viewRadius, 0); x < this.player.getPos().getX() + viewRadius + 1; x++) {\r\n                let point = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](x, y);\r\n                if (this.currentMap.isTileVisible(point) === true) {\r\n                    //okay cool\r\n                }\r\n                else {\r\n                    subMapTiles[y - (this.player.getPos().getY() - viewRadius)][x - (this.player.getPos().getX() - viewRadius)] = \"\";\r\n                }\r\n                if (this.currentMap.lastSeenTile(point) !== \"\") {\r\n                    seenSubMap[y - (this.player.getPos().getY() - viewRadius)][x - (this.player.getPos().getX() - viewRadius)] = this.currentMap.lastSeenTile(point);\r\n                }\r\n                else {\r\n                    seenSubMap[y - (this.player.getPos().getY() - viewRadius)][x - (this.player.getPos().getX() - viewRadius)] = \"\";\r\n                }\r\n                countX++;\r\n            }\r\n            countY++;\r\n        }\r\n        // this.renderer.draw(seenSubMap, true)\r\n        this.renderer.draw([\r\n            new _renderer__WEBPACK_IMPORTED_MODULE_1__[\"RenderLayer\"](seenSubMap, [1]),\r\n            new _renderer__WEBPACK_IMPORTED_MODULE_1__[\"RenderLayer\"](subMapTiles, []),\r\n        ]);\r\n        this.renderer.drawTile(viewRadius, viewRadius, \"@\", []); // draw the player in the center.  Probably change this later\r\n        this.invalid = false;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvZ2FtZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9yb2d1ZS9nYW1lLnRzP2U0ZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZ2VvbSBmcm9tIFwiLi9nZW9tXCI7XHJcbmltcG9ydCAqIGFzIHJlbmRlcmVyIGZyb20gXCIuL3JlbmRlcmVyXCI7XHJcbmltcG9ydCAqIGFzIG1hcCBmcm9tIFwiLi9tYXBcIjtcclxuaW1wb3J0ICogYXMgbWFwU2VsZWN0b3IgZnJvbSBcIi4vbWFwU2VsZWN0b3JcIjtcclxuaW1wb3J0ICogYXMgYWN0b3IgZnJvbSBcIi4vYWN0b3JcIjtcclxuaW1wb3J0ICogYXMgaW5wdXQgZnJvbSBcIi4vaW5wdXRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lIHtcclxuICBpbnZhbGlkOiBib29sZWFuID0gdHJ1ZTtcclxuICByZW5kZXJlcjogcmVuZGVyZXIuSU1hcFJlbmRlcmVyO1xyXG4gIGlucHV0OiBpbnB1dC5JbnB1dDtcclxuICB3b3JsZDogbWFwLldvcmxkO1xyXG4gIGN1cnJlbnRNYXA6IG1hcC5JTWFwO1xyXG4gIG1hcFNlbGVjdG9yOiBtYXBTZWxlY3Rvci5NYXBTZWxlY3RvcjtcclxuICB0aWxlczogYW55W107XHJcbiAgcGxheWVyOiBhY3Rvci5QbGF5ZXI7XHJcbiAgY29uc3RydWN0b3IocHVibGljIGRpc3BsYXk6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLnJlbmRlcmVyID0gbmV3IHJlbmRlcmVyLkNhbnZhc01hcFJlbmRlcmVyKFxyXG4gICAgICB0aGlzLmRpc3BsYXksXHJcbiAgICAgIG5ldyBnZW9tLlJlY3RhbmdsZSgwLCAwLCAyMCwgMjApXHJcbiAgICApO1xyXG4gICAgdGhpcy5pbnB1dCA9IG5ldyBpbnB1dC5JbnB1dCgpO1xyXG4gICAgdGhpcy53b3JsZCA9IG5ldyBtYXAuV29ybGQoKTtcclxuICAgIHRoaXMucGxheWVyID0gbmV3IGFjdG9yLlBsYXllcihcclxuICAgICAgMTAsXHJcbiAgICAgIDEuMCxcclxuICAgICAgdGhpcy53b3JsZCxcclxuICAgICAgXCJmb3Jlc3RcIiwgLy9UT0RPOiBtYWtlIGJyYW5jaCBuYW1lcyBhbiBlbnVtXHJcbiAgICAgIG5ldyBtYXAuTWFwQ29vcmRzKDEsIDEsIDApXHJcbiAgICApO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5wbGF5ZXIuZ2V0U3ViTWFwKCkpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5wbGF5ZXIuZ2V0TWFwTmFtZSgpKTtcclxuICAgIHRoaXMuY3VycmVudE1hcCA9IHRoaXMud29ybGQuZ2V0TWFwKFxyXG4gICAgICB0aGlzLnBsYXllci5nZXRTdWJNYXAoKS5nZXRNYXBUeXBlKCksXHJcbiAgICAgIHRoaXMucGxheWVyLmdldFN1Yk1hcENvb3JkcygpXHJcbiAgICApO1xyXG4gICAgdGhpcy5tYXBTZWxlY3RvciA9IG5ldyBtYXBTZWxlY3Rvci5NYXBTZWxlY3Rvcih0aGlzLmN1cnJlbnRNYXApO1xyXG5cclxuICAgIHZhciBnYW1lbG9vcCA9ICgpID0+IHtcclxuICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVsb29wKTtcclxuICAgIH07XHJcbiAgICBnYW1lbG9vcCgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaW5wdXQubmV3RGlyZWN0aW9uKSB7XHJcbiAgICAgIHRoaXMuaW52YWxpZCA9IHRoaXMucGxheWVyLm1vdmUodGhpcy5pbnB1dC5uZXdEaXJlY3Rpb24pO1xyXG4gICAgICB0aGlzLmlucHV0LmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICAvL2lmIHRoZSBwbGF5ZXIgaGFzIG1vdmVkIHRvIGEgbmV3IHN1Yk1hcCwgc2VsZWN0IGl0XHJcbiAgICBpZiAodGhpcy5jdXJyZW50TWFwICE9PSB0aGlzLnBsYXllci5nZXRTdWJNYXAoKSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRNYXAgPSB0aGlzLnBsYXllci5nZXRTdWJNYXAoKTtcclxuICAgICAgdGhpcy5tYXBTZWxlY3RvciA9IG5ldyBtYXBTZWxlY3Rvci5NYXBTZWxlY3Rvcih0aGlzLnBsYXllci5nZXRTdWJNYXAoKSk7XHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaW52YWxpZCkge1xyXG4gICAgICB0aGlzLmRyYXcoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRyYXcoKTogdm9pZCB7XHJcbiAgICBsZXQgdmlld1JhZGl1czogbnVtYmVyID0gMjA7XHJcbiAgICBsZXQgc3ViTWFwVGlsZXM6IGFueVtdID0gdGhpcy5tYXBTZWxlY3Rvci5nZXRTdWJNYXBUaWxlcyhcclxuICAgICAgdmlld1JhZGl1cyxcclxuICAgICAgdGhpcy5wbGF5ZXIuZ2V0UG9zKCkuZ2V0WCgpLFxyXG4gICAgICB0aGlzLnBsYXllci5nZXRQb3MoKS5nZXRZKClcclxuICAgICk7XHJcbiAgICBsZXQgc2VlblN1Yk1hcDogYW55W10gPSB0aGlzLm1hcFNlbGVjdG9yLmdldFN1Yk1hcFRpbGVzKFxyXG4gICAgICB2aWV3UmFkaXVzLFxyXG4gICAgICB0aGlzLnBsYXllci5nZXRQb3MoKS5nZXRYKCksXHJcbiAgICAgIHRoaXMucGxheWVyLmdldFBvcygpLmdldFkoKVxyXG4gICAgKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHN1Yk1hcFRpbGVzKTtcclxuICAgIGxldCB0b3BMZWZ0OiBudW1iZXJbXSA9IFtcclxuICAgICAgdGhpcy5wbGF5ZXIuZ2V0UG9zKCkuZ2V0WCgpIC0gdmlld1JhZGl1cyxcclxuICAgICAgdGhpcy5wbGF5ZXIuZ2V0UG9zKCkuZ2V0WSgpIC0gdmlld1JhZGl1cyxcclxuICAgIF07XHJcbiAgICBsZXQgY291bnRZID0gMDtcclxuICAgIGxldCBjb3VudFggPSAwO1xyXG5cclxuICAgIGZvciAoXHJcbiAgICAgIGxldCB5ID0gTWF0aC5tYXgodGhpcy5wbGF5ZXIuZ2V0UG9zKCkuZ2V0WSgpIC0gdmlld1JhZGl1cywgMCk7XHJcbiAgICAgIHkgPCB0aGlzLnBsYXllci5nZXRQb3MoKS5nZXRZKCkgKyB2aWV3UmFkaXVzICsgMTtcclxuICAgICAgeSsrXHJcbiAgICApIHtcclxuICAgICAgZm9yIChcclxuICAgICAgICBsZXQgeCA9IE1hdGgubWF4KHRoaXMucGxheWVyLmdldFBvcygpLmdldFgoKSAtIHZpZXdSYWRpdXMsIDApO1xyXG4gICAgICAgIHggPCB0aGlzLnBsYXllci5nZXRQb3MoKS5nZXRYKCkgKyB2aWV3UmFkaXVzICsgMTtcclxuICAgICAgICB4KytcclxuICAgICAgKSB7XHJcbiAgICAgICAgbGV0IHBvaW50OiBnZW9tLlBvaW50ID0gbmV3IGdlb20uUG9pbnQoeCwgeSk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE1hcC5pc1RpbGVWaXNpYmxlKHBvaW50KSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgLy9va2F5IGNvb2xcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc3ViTWFwVGlsZXNbeSAtICh0aGlzLnBsYXllci5nZXRQb3MoKS5nZXRZKCkgLSB2aWV3UmFkaXVzKV1bXHJcbiAgICAgICAgICAgIHggLSAodGhpcy5wbGF5ZXIuZ2V0UG9zKCkuZ2V0WCgpIC0gdmlld1JhZGl1cylcclxuICAgICAgICAgIF0gPSBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE1hcC5sYXN0U2VlblRpbGUocG9pbnQpICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICBzZWVuU3ViTWFwW3kgLSAodGhpcy5wbGF5ZXIuZ2V0UG9zKCkuZ2V0WSgpIC0gdmlld1JhZGl1cyldW1xyXG4gICAgICAgICAgICB4IC0gKHRoaXMucGxheWVyLmdldFBvcygpLmdldFgoKSAtIHZpZXdSYWRpdXMpXHJcbiAgICAgICAgICBdID0gdGhpcy5jdXJyZW50TWFwLmxhc3RTZWVuVGlsZShwb2ludCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNlZW5TdWJNYXBbeSAtICh0aGlzLnBsYXllci5nZXRQb3MoKS5nZXRZKCkgLSB2aWV3UmFkaXVzKV1bXHJcbiAgICAgICAgICAgIHggLSAodGhpcy5wbGF5ZXIuZ2V0UG9zKCkuZ2V0WCgpIC0gdmlld1JhZGl1cylcclxuICAgICAgICAgIF0gPSBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY291bnRYKys7XHJcbiAgICAgIH1cclxuICAgICAgY291bnRZKys7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGhpcy5yZW5kZXJlci5kcmF3KHNlZW5TdWJNYXAsIHRydWUpXHJcbiAgICB0aGlzLnJlbmRlcmVyLmRyYXcoW1xyXG4gICAgICBuZXcgcmVuZGVyZXIuUmVuZGVyTGF5ZXIoc2VlblN1Yk1hcCwgWzFdKSxcclxuICAgICAgbmV3IHJlbmRlcmVyLlJlbmRlckxheWVyKHN1Yk1hcFRpbGVzLCBbXSksXHJcbiAgICBdKTtcclxuXHJcbiAgICB0aGlzLnJlbmRlcmVyLmRyYXdUaWxlKHZpZXdSYWRpdXMsIHZpZXdSYWRpdXMsIFwiQFwiLCBbXSk7IC8vIGRyYXcgdGhlIHBsYXllciBpbiB0aGUgY2VudGVyLiAgUHJvYmFibHkgY2hhbmdlIHRoaXMgbGF0ZXJcclxuICAgIHRoaXMuaW52YWxpZCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/rogue/game.ts\n");

/***/ }),

/***/ "./src/rogue/geom.ts":
/*!***************************!*\
  !*** ./src/rogue/geom.ts ***!
  \***************************/
/*! exports provided: Point, Rectangle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Point\", function() { return Point; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Rectangle\", function() { return Rectangle; });\nclass Point {\r\n    constructor(x = 0, y = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    clone() {\r\n        return new Point(this.x, this.y);\r\n    }\r\n    getX() {\r\n        return this.x;\r\n    }\r\n    getY() {\r\n        return this.y;\r\n    }\r\n}\r\nclass Rectangle extends Point {\r\n    constructor(x, y, width = 0, height = 0) {\r\n        super(x, y);\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvZ2VvbS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9yb2d1ZS9nZW9tLnRzP2EzZDEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFBvaW50IHtcclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyID0gMCwgcHVibGljIHk6IG51bWJlciA9IDApIHt9XHJcbiAgY2xvbmUoKTogUG9pbnQge1xyXG4gICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLngsIHRoaXMueSk7XHJcbiAgfVxyXG4gIGdldFgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLng7XHJcbiAgfVxyXG4gIGdldFkoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmVjdGFuZ2xlIGV4dGVuZHMgUG9pbnQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeDogbnVtYmVyLFxyXG4gICAgeTogbnVtYmVyLFxyXG4gICAgcHVibGljIHdpZHRoOiBudW1iZXIgPSAwLFxyXG4gICAgcHVibGljIGhlaWdodDogbnVtYmVyID0gMFxyXG4gICkge1xyXG4gICAgc3VwZXIoeCwgeSk7XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/rogue/geom.ts\n");

/***/ }),

/***/ "./src/rogue/input.ts":
/*!****************************!*\
  !*** ./src/rogue/input.ts ***!
  \****************************/
/*! exports provided: Keyboard, Directions, Input */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Keyboard\", function() { return Keyboard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Directions\", function() { return Directions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Input\", function() { return Input; });\n/* harmony import */ var _geom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geom */ \"./src/rogue/geom.ts\");\n\r\nvar Keyboard;\r\n(function (Keyboard) {\r\n    Keyboard[Keyboard[\"LEFT\"] = 37] = \"LEFT\";\r\n    Keyboard[Keyboard[\"UP\"] = 38] = \"UP\";\r\n    Keyboard[Keyboard[\"RIGHT\"] = 39] = \"RIGHT\";\r\n    Keyboard[Keyboard[\"DOWN\"] = 40] = \"DOWN\";\r\n    Keyboard[Keyboard[\"H\"] = 72] = \"H\";\r\n    Keyboard[Keyboard[\"J\"] = 74] = \"J\";\r\n    Keyboard[Keyboard[\"K\"] = 75] = \"K\";\r\n    Keyboard[Keyboard[\"L\"] = 76] = \"L\";\r\n    Keyboard[Keyboard[\"Y\"] = 89] = \"Y\";\r\n    Keyboard[Keyboard[\"U\"] = 85] = \"U\";\r\n    Keyboard[Keyboard[\"B\"] = 66] = \"B\";\r\n    Keyboard[Keyboard[\"N\"] = 78] = \"N\";\r\n})(Keyboard || (Keyboard = {}));\r\nvar Directions = {\r\n    UP: new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](0, -1),\r\n    DOWN: new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](0, 1),\r\n    RIGHT: new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](1, 0),\r\n    LEFT: new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](-1, 0),\r\n    UPLEFT: new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](-1, -1),\r\n    UPRIGHT: new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](1, -1),\r\n    DOWNLEFT: new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](-1, 1),\r\n    DOWNRIGHT: new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](1, 1),\r\n};\r\n//TODO input interface, then mouse and steering wheel support\r\nclass Input {\r\n    constructor() {\r\n        window.addEventListener(\"keydown\", (event) => this.keypress(event), false);\r\n    }\r\n    keypress(event) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        let keyCode = event[\"keyCode\"];\r\n        switch (keyCode) {\r\n            case Keyboard.UP:\r\n            case Keyboard.K:\r\n                this.newDirection = Directions.UP;\r\n                break;\r\n            case Keyboard.RIGHT:\r\n            case Keyboard.L:\r\n                this.newDirection = Directions.RIGHT;\r\n                break;\r\n            case Keyboard.DOWN:\r\n            case Keyboard.J:\r\n                this.newDirection = Directions.DOWN;\r\n                break;\r\n            case Keyboard.LEFT:\r\n            case Keyboard.H:\r\n                this.newDirection = Directions.LEFT;\r\n                break;\r\n            case Keyboard.Y:\r\n                this.newDirection = Directions.UPLEFT;\r\n                break;\r\n            case Keyboard.U:\r\n                this.newDirection = Directions.UPRIGHT;\r\n                break;\r\n            case Keyboard.B:\r\n                this.newDirection = Directions.DOWNLEFT;\r\n                break;\r\n            case Keyboard.N:\r\n                this.newDirection = Directions.DOWNRIGHT;\r\n                break;\r\n        }\r\n    }\r\n    clear() {\r\n        this.newDirection = null;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvaW5wdXQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcm9ndWUvaW5wdXQudHM/OTZlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBnZW9tIGZyb20gXCIuL2dlb21cIjtcclxuXHJcbmV4cG9ydCBlbnVtIEtleWJvYXJkIHtcclxuICBMRUZUID0gMzcsXHJcbiAgVVAgPSAzOCxcclxuICBSSUdIVCA9IDM5LFxyXG4gIERPV04gPSA0MCxcclxuICBIID0gNzIsXHJcbiAgSiA9IDc0LFxyXG4gIEsgPSA3NSxcclxuICBMID0gNzYsXHJcbiAgWSA9IDg5LFxyXG4gIFUgPSA4NSxcclxuICBCID0gNjYsXHJcbiAgTiA9IDc4LFxyXG59XHJcblxyXG5leHBvcnQgdmFyIERpcmVjdGlvbnMgPSB7XHJcbiAgVVA6IG5ldyBnZW9tLlBvaW50KDAsIC0xKSxcclxuICBET1dOOiBuZXcgZ2VvbS5Qb2ludCgwLCAxKSxcclxuICBSSUdIVDogbmV3IGdlb20uUG9pbnQoMSwgMCksXHJcbiAgTEVGVDogbmV3IGdlb20uUG9pbnQoLTEsIDApLFxyXG4gIFVQTEVGVDogbmV3IGdlb20uUG9pbnQoLTEsIC0xKSxcclxuICBVUFJJR0hUOiBuZXcgZ2VvbS5Qb2ludCgxLCAtMSksXHJcbiAgRE9XTkxFRlQ6IG5ldyBnZW9tLlBvaW50KC0xLCAxKSxcclxuICBET1dOUklHSFQ6IG5ldyBnZW9tLlBvaW50KDEsIDEpLFxyXG59O1xyXG5cclxuLy9UT0RPIGlucHV0IGludGVyZmFjZSwgdGhlbiBtb3VzZSBhbmQgc3RlZXJpbmcgd2hlZWwgc3VwcG9ydFxyXG5leHBvcnQgY2xhc3MgSW5wdXQge1xyXG4gIG5ld0RpcmVjdGlvbjogZ2VvbS5Qb2ludDtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHRoaXMua2V5cHJlc3MoZXZlbnQpLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBrZXlwcmVzcyhldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCBrZXlDb2RlID0gZXZlbnRbXCJrZXlDb2RlXCJdO1xyXG5cclxuICAgIHN3aXRjaCAoa2V5Q29kZSkge1xyXG4gICAgICBjYXNlIEtleWJvYXJkLlVQOlxyXG4gICAgICBjYXNlIEtleWJvYXJkLks6XHJcbiAgICAgICAgdGhpcy5uZXdEaXJlY3Rpb24gPSBEaXJlY3Rpb25zLlVQO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEtleWJvYXJkLlJJR0hUOlxyXG4gICAgICBjYXNlIEtleWJvYXJkLkw6XHJcbiAgICAgICAgdGhpcy5uZXdEaXJlY3Rpb24gPSBEaXJlY3Rpb25zLlJJR0hUO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEtleWJvYXJkLkRPV046XHJcbiAgICAgIGNhc2UgS2V5Ym9hcmQuSjpcclxuICAgICAgICB0aGlzLm5ld0RpcmVjdGlvbiA9IERpcmVjdGlvbnMuRE9XTjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBLZXlib2FyZC5MRUZUOlxyXG4gICAgICBjYXNlIEtleWJvYXJkLkg6XHJcbiAgICAgICAgdGhpcy5uZXdEaXJlY3Rpb24gPSBEaXJlY3Rpb25zLkxFRlQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgS2V5Ym9hcmQuWTpcclxuICAgICAgICB0aGlzLm5ld0RpcmVjdGlvbiA9IERpcmVjdGlvbnMuVVBMRUZUO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEtleWJvYXJkLlU6XHJcbiAgICAgICAgdGhpcy5uZXdEaXJlY3Rpb24gPSBEaXJlY3Rpb25zLlVQUklHSFQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgS2V5Ym9hcmQuQjpcclxuICAgICAgICB0aGlzLm5ld0RpcmVjdGlvbiA9IERpcmVjdGlvbnMuRE9XTkxFRlQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgS2V5Ym9hcmQuTjpcclxuICAgICAgICB0aGlzLm5ld0RpcmVjdGlvbiA9IERpcmVjdGlvbnMuRE9XTlJJR0hUO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xlYXIoKTogdm9pZCB7XHJcbiAgICB0aGlzLm5ld0RpcmVjdGlvbiA9IG51bGw7XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/rogue/input.ts\n");

/***/ }),

/***/ "./src/rogue/map.ts":
/*!**************************!*\
  !*** ./src/rogue/map.ts ***!
  \**************************/
/*! exports provided: TileMap, MapCoords, Branch, World */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TileMap\", function() { return TileMap; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MapCoords\", function() { return MapCoords; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Branch\", function() { return Branch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"World\", function() { return World; });\n/* harmony import */ var _geom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geom */ \"./src/rogue/geom.ts\");\n/* harmony import */ var _mapGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mapGenerator */ \"./src/rogue/mapGenerator.ts\");\n\r\n\r\nclass TileMap {\r\n    constructor(tiles, type) {\r\n        this.tiles = tiles;\r\n        this.type = type;\r\n        this.type = type;\r\n        this.blocksLight = this.blocksLight.bind(this);\r\n        this.getTileType = this.getTileType.bind(this);\r\n        this.setVisibleTile = this.setVisibleTile.bind(this);\r\n        this.lastSeenTile = this.lastSeenTile.bind(this);\r\n        this.isTileVisible = this.isTileVisible.bind(this);\r\n        this.visibleTiles = [];\r\n        this.seenTiles = [];\r\n        this.resetVisibility();\r\n        for (let y = 0; y < this.getHeight(); y++) {\r\n            this.seenTiles[y] = [];\r\n            for (let x = 0; x < this.getWidth(); x++) {\r\n                this.seenTiles[y].push(\"\");\r\n            }\r\n        }\r\n    }\r\n    getTileType(point) {\r\n        if (this.tiles != undefined &&\r\n            this.tiles[point.getY()] !== undefined &&\r\n            this.tiles[point.getY()][point.getX()] !== undefined) {\r\n            return this.tiles[point.getY()][point.getX()];\r\n        }\r\n        else {\r\n            return \"OFFSCREEN\";\r\n        }\r\n    }\r\n    getMapType() {\r\n        return this.type;\r\n    }\r\n    getWidth() {\r\n        return this.tiles[0].length;\r\n    }\r\n    getHeight() {\r\n        return this.tiles.length;\r\n    }\r\n    getTileID(row, column) {\r\n        return row * this.getWidth() + column;\r\n    }\r\n    getTiles() {\r\n        return this.tiles;\r\n    }\r\n    resetVisibility() {\r\n        for (let y = 0; y < this.getHeight(); y++) {\r\n            this.visibleTiles[y] = [];\r\n            for (let x = 0; x < this.getWidth(); x++) {\r\n                this.visibleTiles[y].push(false);\r\n            }\r\n        }\r\n    }\r\n    setVisibleTile(point) {\r\n        if (this.inBounds(point)) {\r\n            this.visibleTiles[point.getY()][point.getX()] = true;\r\n            this.setLastSeenTile(point, this.getTileType(point));\r\n        }\r\n    }\r\n    setLastSeenTile(point, tile) {\r\n        if (this.inBounds(point)) {\r\n            this.seenTiles[point.getY()][point.getX()] = this.getTileType(point);\r\n        }\r\n    }\r\n    isTileVisible(point) {\r\n        if (this.inBounds(point)) {\r\n            return this.visibleTiles[point.getY()][point.getX()];\r\n        }\r\n    }\r\n    lastSeenTile(point) {\r\n        if (this.inBounds(point)) {\r\n            return this.seenTiles[point.getY()][point.getX()];\r\n        }\r\n    }\r\n    inBounds(point) {\r\n        return (point.getX() >= 0 &&\r\n            point.getY() >= 0 &&\r\n            point.getX() < this.getWidth() &&\r\n            point.getY() < this.getHeight());\r\n        // return true;\r\n    }\r\n    getEmptyTile() {\r\n        let isEmpty = false;\r\n        let point = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](0, 0);\r\n        while (!isEmpty) {\r\n            let x = Math.floor(Math.random() * this.getWidth());\r\n            let y = Math.floor(Math.random() * this.getHeight());\r\n            point = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](x, y);\r\n            if (this.getTileType(point) === \" \") {\r\n                isEmpty = true;\r\n            }\r\n        }\r\n        return point;\r\n    }\r\n    blocksLight(x, y) {\r\n        let tile = this.getTileType(new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](x, y));\r\n        if (tile === \"#\" || tile === \"OFFSCREEN\") {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\nclass MapCoords {\r\n    constructor(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n}\r\nclass Branch {\r\n    constructor(dimensions, width, height, generator) {\r\n        this.generator = generator;\r\n        this.name = this.generator.getName();\r\n        this.dimensions = dimensions;\r\n        this.tileWidth = width;\r\n        this.tileHeight = height;\r\n        //create a 3D array of TileMaps based on the dimensions parameter\r\n        this.maps = [...Array(dimensions.x + 1)].map((x) => Array(dimensions.y + 1)\r\n            .fill(this.createFloor())\r\n            .map((x) => Array(dimensions.z + 1).fill(this.createFloor())));\r\n        //TODO: Connect the maps with doors/stairs\r\n    }\r\n    getName() {\r\n        return this.name;\r\n    }\r\n    getMap(coords, currentCoords) {\r\n        if (this.maps[coords.x] &&\r\n            this.maps[coords.x][coords.y] &&\r\n            this.maps[coords.x][coords.y][coords.z]) {\r\n            return this.maps[coords.x][coords.y][coords.z];\r\n        }\r\n        else if (currentCoords) {\r\n            return this.maps[currentCoords.x][currentCoords.y][currentCoords.z];\r\n        }\r\n        else {\r\n            throw new Error(\"map.getMap returned undefined, and no currentCoords were passed.\");\r\n        }\r\n    }\r\n    createFloor() {\r\n        let firstFloor;\r\n        let tiles = this.generator.buildMap(this.tileWidth, this.tileHeight, 3);\r\n        return new TileMap(tiles, this.generator.getName());\r\n    }\r\n}\r\nclass World {\r\n    constructor() {\r\n        this.branches = [];\r\n        this.branches.push(new Branch(new MapCoords(2, 2, 0), 15, 15, new _mapGenerator__WEBPACK_IMPORTED_MODULE_1__[\"ForestMapBuilder\"]()));\r\n    }\r\n    getBranch(name) {\r\n        return this.branches.find((x) => x.getName() === name);\r\n    }\r\n    getMap(name, coords) {\r\n        console.log(coords);\r\n        console.log(this.branches.find((x) => x.getName() === name));\r\n        return this.branches.find((x) => x.getName() === name).getMap(coords);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvbWFwLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3JvZ3VlL21hcC50cz9mMTU0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGdlb20gZnJvbSBcIi4vZ2VvbVwiO1xyXG5pbXBvcnQgKiBhcyBtYXBHZW5lcmF0b3IgZnJvbSBcIi4vbWFwR2VuZXJhdG9yXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElNYXAge1xyXG4gIGdldFdpZHRoKCk6IG51bWJlcjtcclxuICBnZXRIZWlnaHQoKTogbnVtYmVyO1xyXG5cclxuICBnZXRUaWxlcygpOiBhbnlbXTtcclxuICBnZXRNYXBUeXBlKCk6IHN0cmluZzsgLy90eXBlLCBpZSBkdW5nZW9uLCBmb3Jlc3QsIGV0Yy5cclxuICBnZXRUaWxlVHlwZShwb2ludDogZ2VvbS5Qb2ludCk6IHN0cmluZztcclxuICBnZXRFbXB0eVRpbGUoKTogZ2VvbS5Qb2ludDtcclxuICBzZXRWaXNpYmxlVGlsZShwb2ludDogZ2VvbS5Qb2ludCk6IHZvaWQ7XHJcbiAgaXNUaWxlVmlzaWJsZShwb2ludDogZ2VvbS5Qb2ludCk6IGJvb2xlYW47XHJcbiAgbGFzdFNlZW5UaWxlKHBvaW50OiBnZW9tLlBvaW50KTogc3RyaW5nO1xyXG4gIHJlc2V0VmlzaWJpbGl0eSgpOiB2b2lkO1xyXG4gIGJsb2Nrc0xpZ2h0KHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRpbGVNYXAgaW1wbGVtZW50cyBJTWFwIHtcclxuICB2aXNpYmxlVGlsZXM6IGJvb2xlYW5bXVtdO1xyXG4gIHNlZW5UaWxlczogc3RyaW5nW11bXTtcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRpbGVzOiBhbnlbXSwgcHJpdmF0ZSB0eXBlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB0aGlzLmJsb2Nrc0xpZ2h0ID0gdGhpcy5ibG9ja3NMaWdodC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5nZXRUaWxlVHlwZSA9IHRoaXMuZ2V0VGlsZVR5cGUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZVRpbGUgPSB0aGlzLnNldFZpc2libGVUaWxlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmxhc3RTZWVuVGlsZSA9IHRoaXMubGFzdFNlZW5UaWxlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmlzVGlsZVZpc2libGUgPSB0aGlzLmlzVGlsZVZpc2libGUuYmluZCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLnZpc2libGVUaWxlcyA9IFtdO1xyXG4gICAgdGhpcy5zZWVuVGlsZXMgPSBbXTtcclxuXHJcbiAgICB0aGlzLnJlc2V0VmlzaWJpbGl0eSgpO1xyXG5cclxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5nZXRIZWlnaHQoKTsgeSsrKSB7XHJcbiAgICAgIHRoaXMuc2VlblRpbGVzW3ldID0gW107XHJcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5nZXRXaWR0aCgpOyB4KyspIHtcclxuICAgICAgICB0aGlzLnNlZW5UaWxlc1t5XS5wdXNoKFwiXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0VGlsZVR5cGUocG9pbnQ6IGdlb20uUG9pbnQpOiBzdHJpbmcge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLnRpbGVzICE9IHVuZGVmaW5lZCAmJlxyXG4gICAgICB0aGlzLnRpbGVzW3BvaW50LmdldFkoKV0gIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICB0aGlzLnRpbGVzW3BvaW50LmdldFkoKV1bcG9pbnQuZ2V0WCgpXSAhPT0gdW5kZWZpbmVkXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHRoaXMudGlsZXNbcG9pbnQuZ2V0WSgpXVtwb2ludC5nZXRYKCldO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFwiT0ZGU0NSRUVOXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0TWFwVHlwZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMudHlwZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudGlsZXNbMF0ubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudGlsZXMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFRpbGVJRChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHJvdyAqIHRoaXMuZ2V0V2lkdGgoKSArIGNvbHVtbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRUaWxlcygpOiBhbnlbXSB7XHJcbiAgICByZXR1cm4gdGhpcy50aWxlcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZXNldFZpc2liaWxpdHkoKTogdm9pZCB7XHJcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuZ2V0SGVpZ2h0KCk7IHkrKykge1xyXG4gICAgICB0aGlzLnZpc2libGVUaWxlc1t5XSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuZ2V0V2lkdGgoKTsgeCsrKSB7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlVGlsZXNbeV0ucHVzaChmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRWaXNpYmxlVGlsZShwb2ludDogZ2VvbS5Qb2ludCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaW5Cb3VuZHMocG9pbnQpKSB7XHJcbiAgICAgIHRoaXMudmlzaWJsZVRpbGVzW3BvaW50LmdldFkoKV1bcG9pbnQuZ2V0WCgpXSA9IHRydWU7XHJcbiAgICAgIHRoaXMuc2V0TGFzdFNlZW5UaWxlKHBvaW50LCB0aGlzLmdldFRpbGVUeXBlKHBvaW50KSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgc2V0TGFzdFNlZW5UaWxlKHBvaW50OiBnZW9tLlBvaW50LCB0aWxlOiBzdHJpbmcpIHtcclxuICAgIGlmICh0aGlzLmluQm91bmRzKHBvaW50KSkge1xyXG4gICAgICB0aGlzLnNlZW5UaWxlc1twb2ludC5nZXRZKCldW3BvaW50LmdldFgoKV0gPSB0aGlzLmdldFRpbGVUeXBlKHBvaW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc1RpbGVWaXNpYmxlKHBvaW50OiBnZW9tLlBvaW50KTogYm9vbGVhbiB7XHJcbiAgICBpZiAodGhpcy5pbkJvdW5kcyhwb2ludCkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZVRpbGVzW3BvaW50LmdldFkoKV1bcG9pbnQuZ2V0WCgpXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBsYXN0U2VlblRpbGUocG9pbnQ6IGdlb20uUG9pbnQpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMuaW5Cb3VuZHMocG9pbnQpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNlZW5UaWxlc1twb2ludC5nZXRZKCldW3BvaW50LmdldFgoKV07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluQm91bmRzKHBvaW50OiBnZW9tLlBvaW50KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBwb2ludC5nZXRYKCkgPj0gMCAmJlxyXG4gICAgICBwb2ludC5nZXRZKCkgPj0gMCAmJlxyXG4gICAgICBwb2ludC5nZXRYKCkgPCB0aGlzLmdldFdpZHRoKCkgJiZcclxuICAgICAgcG9pbnQuZ2V0WSgpIDwgdGhpcy5nZXRIZWlnaHQoKVxyXG4gICAgKTtcclxuICAgIC8vIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEVtcHR5VGlsZSgpOiBnZW9tLlBvaW50IHtcclxuICAgIGxldCBpc0VtcHR5OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBsZXQgcG9pbnQ6IGdlb20uUG9pbnQgPSBuZXcgZ2VvbS5Qb2ludCgwLCAwKTtcclxuICAgIHdoaWxlICghaXNFbXB0eSkge1xyXG4gICAgICBsZXQgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuZ2V0V2lkdGgoKSk7XHJcbiAgICAgIGxldCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5nZXRIZWlnaHQoKSk7XHJcbiAgICAgIHBvaW50ID0gbmV3IGdlb20uUG9pbnQoeCwgeSk7XHJcblxyXG4gICAgICBpZiAodGhpcy5nZXRUaWxlVHlwZShwb2ludCkgPT09IFwiIFwiKSB7XHJcbiAgICAgICAgaXNFbXB0eSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcG9pbnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYmxvY2tzTGlnaHQoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIGxldCB0aWxlOiBzdHJpbmcgPSB0aGlzLmdldFRpbGVUeXBlKG5ldyBnZW9tLlBvaW50KHgsIHkpKTtcclxuICAgIGlmICh0aWxlID09PSBcIiNcIiB8fCB0aWxlID09PSBcIk9GRlNDUkVFTlwiKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1hcENvb3JkcyB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuICB6OiBudW1iZXI7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnogPSB6O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJyYW5jaCB7XHJcbiAgbWFwczogSU1hcFtdW11bXTtcclxuICBnZW5lcmF0b3I6IG1hcEdlbmVyYXRvci5NYXBHZW5lcmF0b3I7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGRpbWVuc2lvbnM6IE1hcENvb3JkcztcclxuICB0aWxlV2lkdGg6IG51bWJlcjtcclxuICB0aWxlSGVpZ2h0OiBudW1iZXI7XHJcbiAgZGVwdGg6IG51bWJlcjtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRpbWVuc2lvbnM6IE1hcENvb3JkcyxcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGdlbmVyYXRvcjogbWFwR2VuZXJhdG9yLk1hcEdlbmVyYXRvclxyXG4gICkge1xyXG4gICAgdGhpcy5nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XHJcbiAgICB0aGlzLm5hbWUgPSB0aGlzLmdlbmVyYXRvci5nZXROYW1lKCk7XHJcbiAgICB0aGlzLmRpbWVuc2lvbnMgPSBkaW1lbnNpb25zO1xyXG4gICAgdGhpcy50aWxlV2lkdGggPSB3aWR0aDtcclxuICAgIHRoaXMudGlsZUhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAvL2NyZWF0ZSBhIDNEIGFycmF5IG9mIFRpbGVNYXBzIGJhc2VkIG9uIHRoZSBkaW1lbnNpb25zIHBhcmFtZXRlclxyXG4gICAgdGhpcy5tYXBzID0gWy4uLkFycmF5KGRpbWVuc2lvbnMueCArIDEpXS5tYXAoKHgpID0+XHJcbiAgICAgIEFycmF5KGRpbWVuc2lvbnMueSArIDEpXHJcbiAgICAgICAgLmZpbGwodGhpcy5jcmVhdGVGbG9vcigpKVxyXG4gICAgICAgIC5tYXAoKHgpID0+IEFycmF5KGRpbWVuc2lvbnMueiArIDEpLmZpbGwodGhpcy5jcmVhdGVGbG9vcigpKSlcclxuICAgICk7XHJcblxyXG4gICAgLy9UT0RPOiBDb25uZWN0IHRoZSBtYXBzIHdpdGggZG9vcnMvc3RhaXJzXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMubmFtZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRNYXAoY29vcmRzOiBNYXBDb29yZHMsIGN1cnJlbnRDb29yZHM/OiBNYXBDb29yZHMpOiBJTWFwIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5tYXBzW2Nvb3Jkcy54XSAmJlxyXG4gICAgICB0aGlzLm1hcHNbY29vcmRzLnhdW2Nvb3Jkcy55XSAmJlxyXG4gICAgICB0aGlzLm1hcHNbY29vcmRzLnhdW2Nvb3Jkcy55XVtjb29yZHMuel1cclxuICAgICkge1xyXG4gICAgICByZXR1cm4gdGhpcy5tYXBzW2Nvb3Jkcy54XVtjb29yZHMueV1bY29vcmRzLnpdO1xyXG4gICAgfSBlbHNlIGlmIChjdXJyZW50Q29vcmRzKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLm1hcHNbY3VycmVudENvb3Jkcy54XVtjdXJyZW50Q29vcmRzLnldW2N1cnJlbnRDb29yZHMuel07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgXCJtYXAuZ2V0TWFwIHJldHVybmVkIHVuZGVmaW5lZCwgYW5kIG5vIGN1cnJlbnRDb29yZHMgd2VyZSBwYXNzZWQuXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGVGbG9vcigpOiBUaWxlTWFwIHtcclxuICAgIGxldCBmaXJzdEZsb29yOiBUaWxlTWFwO1xyXG5cclxuICAgIGxldCB0aWxlcyA9IHRoaXMuZ2VuZXJhdG9yLmJ1aWxkTWFwKHRoaXMudGlsZVdpZHRoLCB0aGlzLnRpbGVIZWlnaHQsIDMpO1xyXG5cclxuICAgIHJldHVybiBuZXcgVGlsZU1hcCh0aWxlcywgdGhpcy5nZW5lcmF0b3IuZ2V0TmFtZSgpKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JsZCB7XHJcbiAgYnJhbmNoZXM6IEJyYW5jaFtdO1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5icmFuY2hlcyA9IFtdO1xyXG4gICAgdGhpcy5icmFuY2hlcy5wdXNoKFxyXG4gICAgICBuZXcgQnJhbmNoKFxyXG4gICAgICAgIG5ldyBNYXBDb29yZHMoMiwgMiwgMCksXHJcbiAgICAgICAgMTUsXHJcbiAgICAgICAgMTUsXHJcbiAgICAgICAgbmV3IG1hcEdlbmVyYXRvci5Gb3Jlc3RNYXBCdWlsZGVyKClcclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRCcmFuY2gobmFtZTogc3RyaW5nKTogQnJhbmNoIHtcclxuICAgIHJldHVybiB0aGlzLmJyYW5jaGVzLmZpbmQoKHgpID0+IHguZ2V0TmFtZSgpID09PSBuYW1lKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRNYXAobmFtZTogc3RyaW5nLCBjb29yZHM6IE1hcENvb3Jkcyk6IElNYXAge1xyXG4gICAgY29uc29sZS5sb2coY29vcmRzKTtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuYnJhbmNoZXMuZmluZCgoeCkgPT4geC5nZXROYW1lKCkgPT09IG5hbWUpKTtcclxuICAgIHJldHVybiB0aGlzLmJyYW5jaGVzLmZpbmQoKHgpID0+IHguZ2V0TmFtZSgpID09PSBuYW1lKS5nZXRNYXAoY29vcmRzKTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/rogue/map.ts\n");

/***/ }),

/***/ "./src/rogue/mapGenerator.ts":
/*!***********************************!*\
  !*** ./src/rogue/mapGenerator.ts ***!
  \***********************************/
/*! exports provided: CaveMapBuilder, ForestMapBuilder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CaveMapBuilder\", function() { return CaveMapBuilder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ForestMapBuilder\", function() { return ForestMapBuilder; });\nclass CaveMapBuilder {\r\n    constructor() {\r\n        this.name = \"caves\";\r\n    }\r\n    getName() {\r\n        return this.name;\r\n    }\r\n    buildMap(width, height, numberOfSteps) {\r\n        let cellMap = [];\r\n        for (let i = 0; i < height; i++) {\r\n            cellMap[i] = [];\r\n            for (let j = 0; j < width; j++) {\r\n                cellMap[i][j] = false;\r\n            }\r\n        }\r\n        cellMap = this.initializeMap(width, height, cellMap);\r\n        for (let i = 0; i < numberOfSteps; i++) {\r\n            cellMap = this.doSimulationStep(width, height, cellMap);\r\n        }\r\n        for (let i in cellMap) {\r\n            for (let j in cellMap[i]) {\r\n                if (cellMap[i][j] === true) {\r\n                    cellMap[i][j] = \"#\";\r\n                }\r\n                else {\r\n                    cellMap[i][j] = \" \";\r\n                }\r\n            }\r\n        }\r\n        return cellMap;\r\n    }\r\n    initializeMap(width, height, map) {\r\n        let chanceToStartAlive = 0.4;\r\n        for (let x = 0; x < width; x++) {\r\n            for (let y = 0; y < height; y++) {\r\n                if (Math.random() < chanceToStartAlive) {\r\n                    map[x][y] = true;\r\n                }\r\n            }\r\n        }\r\n        return map;\r\n    }\r\n    countAliveNeighbors(x, y, map) {\r\n        let count = 0;\r\n        for (let i = -1; i < 2; i++) {\r\n            for (let j = -1; j < 2; j++) {\r\n                let neighbour_x = x + i;\r\n                let neighbour_y = y + j;\r\n                if (i === 0 && j === 0) {\r\n                    //don't do anything\r\n                }\r\n                else if (neighbour_x < 0 ||\r\n                    neighbour_y < 0 ||\r\n                    neighbour_x >= map.length ||\r\n                    neighbour_y >= map[0].length) {\r\n                    count += 1;\r\n                }\r\n                else if (map[neighbour_x][neighbour_y]) {\r\n                    count += 1;\r\n                }\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    doSimulationStep(width, height, oldMap) {\r\n        let newMap = [];\r\n        let birthLimit = 4;\r\n        let deathLimit = 3;\r\n        for (let i = 0; i < height; i++) {\r\n            newMap[i] = [];\r\n            for (let j = 0; j < width; j++) {\r\n                newMap[i][j] = false;\r\n            }\r\n        }\r\n        for (let x = 0; x < oldMap.length; x++) {\r\n            for (let y = 0; y < oldMap[0].length; y++) {\r\n                let nbs = this.countAliveNeighbors(x, y, oldMap);\r\n                if (oldMap[x][y] === true) {\r\n                    if (nbs < deathLimit) {\r\n                        newMap[x][y] = false;\r\n                    }\r\n                    else {\r\n                        newMap[x][y] = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (nbs > birthLimit) {\r\n                        newMap[x][y] = true;\r\n                    }\r\n                    else {\r\n                        newMap[x][y] = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return newMap;\r\n    }\r\n}\r\nclass ForestMapBuilder {\r\n    constructor() {\r\n        this.name = \"forest\";\r\n    }\r\n    getName() {\r\n        return this.name;\r\n    }\r\n    buildMap(width, height, numberOfSteps) {\r\n        let cellMap = [];\r\n        for (let i = 0; i < height; i++) {\r\n            cellMap[i] = [];\r\n            for (let j = 0; j < width; j++) {\r\n                cellMap[i][j] = false;\r\n            }\r\n        }\r\n        cellMap = this.initializeMap(width, height, cellMap);\r\n        for (let i = 0; i < numberOfSteps; i++) {\r\n            cellMap = this.doSimulationStep(width, height, cellMap);\r\n        }\r\n        for (let i in cellMap) {\r\n            for (let j in cellMap[i]) {\r\n                if (cellMap[i][j] === true) {\r\n                    cellMap[i][j] = \" \";\r\n                }\r\n                else {\r\n                    cellMap[i][j] = \"#\";\r\n                }\r\n            }\r\n        }\r\n        return cellMap;\r\n    }\r\n    initializeMap(width, height, map) {\r\n        let chanceToStartAlive = 0.4;\r\n        for (let x = 0; x < width; x++) {\r\n            for (let y = 0; y < height; y++) {\r\n                if (Math.random() < chanceToStartAlive) {\r\n                    map[x][y] = true;\r\n                }\r\n            }\r\n        }\r\n        return map;\r\n    }\r\n    countAliveNeighbors(x, y, map) {\r\n        let count = 0;\r\n        for (let i = -1; i < 2; i++) {\r\n            for (let j = -1; j < 2; j++) {\r\n                let neighbour_x = x + i;\r\n                let neighbour_y = y + j;\r\n                if (i === 0 && j === 0) {\r\n                    //don't do anything\r\n                }\r\n                else if (neighbour_x < 0 ||\r\n                    neighbour_y < 0 ||\r\n                    neighbour_x >= map.length ||\r\n                    neighbour_y >= map[0].length) {\r\n                    count += 1;\r\n                }\r\n                else if (map[neighbour_x][neighbour_y]) {\r\n                    count += 1;\r\n                }\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    doSimulationStep(width, height, oldMap) {\r\n        let newMap = [];\r\n        let birthLimit = 3;\r\n        let deathLimit = 3;\r\n        for (let i = 0; i < height; i++) {\r\n            newMap[i] = [];\r\n            for (let j = 0; j < width; j++) {\r\n                newMap[i][j] = false;\r\n            }\r\n        }\r\n        for (let x = 0; x < oldMap.length; x++) {\r\n            for (let y = 0; y < oldMap[0].length; y++) {\r\n                let nbs = this.countAliveNeighbors(x, y, oldMap);\r\n                if (oldMap[x][y] === true) {\r\n                    if (nbs < deathLimit) {\r\n                        newMap[x][y] = false;\r\n                    }\r\n                    else {\r\n                        newMap[x][y] = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (nbs > birthLimit) {\r\n                        newMap[x][y] = true;\r\n                    }\r\n                    else {\r\n                        newMap[x][y] = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return newMap;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvbWFwR2VuZXJhdG9yLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3JvZ3VlL21hcEdlbmVyYXRvci50cz8xOTAyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgTWFwR2VuZXJhdG9yIHtcclxuICBidWlsZE1hcCh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgbnVtYmVyT2ZTdGVwczogbnVtYmVyKTogYW55W107XHJcbiAgZ2V0TmFtZSgpOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDYXZlTWFwQnVpbGRlciBpbXBsZW1lbnRzIE1hcEdlbmVyYXRvciB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5uYW1lID0gXCJjYXZlc1wiO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldE5hbWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYnVpbGRNYXAoXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBudW1iZXJPZlN0ZXBzOiBudW1iZXJcclxuICApOiBhbnlbXVtdIHtcclxuICAgIGxldCBjZWxsTWFwOiBhbnlbXVtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XHJcbiAgICAgIGNlbGxNYXBbaV0gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7XHJcbiAgICAgICAgY2VsbE1hcFtpXVtqXSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2VsbE1hcCA9IHRoaXMuaW5pdGlhbGl6ZU1hcCh3aWR0aCwgaGVpZ2h0LCBjZWxsTWFwKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mU3RlcHM7IGkrKykge1xyXG4gICAgICBjZWxsTWFwID0gdGhpcy5kb1NpbXVsYXRpb25TdGVwKHdpZHRoLCBoZWlnaHQsIGNlbGxNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgaW4gY2VsbE1hcCkge1xyXG4gICAgICBmb3IgKGxldCBqIGluIGNlbGxNYXBbaV0pIHtcclxuICAgICAgICBpZiAoY2VsbE1hcFtpXVtqXSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgY2VsbE1hcFtpXVtqXSA9IFwiI1wiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjZWxsTWFwW2ldW2pdID0gXCIgXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2VsbE1hcDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1hcChcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIG1hcDogYm9vbGVhbltdW11cclxuICApOiBib29sZWFuW11bXSB7XHJcbiAgICBsZXQgY2hhbmNlVG9TdGFydEFsaXZlOiBudW1iZXIgPSAwLjQ7XHJcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcclxuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgY2hhbmNlVG9TdGFydEFsaXZlKSB7XHJcbiAgICAgICAgICBtYXBbeF1beV0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hcDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY291bnRBbGl2ZU5laWdoYm9ycyh4OiBudW1iZXIsIHk6IG51bWJlciwgbWFwOiBib29sZWFuW11bXSk6IG51bWJlciB7XHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IC0xOyBpIDwgMjsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAtMTsgaiA8IDI7IGorKykge1xyXG4gICAgICAgIGxldCBuZWlnaGJvdXJfeDogbnVtYmVyID0geCArIGk7XHJcbiAgICAgICAgbGV0IG5laWdoYm91cl95OiBudW1iZXIgPSB5ICsgajtcclxuXHJcbiAgICAgICAgaWYgKGkgPT09IDAgJiYgaiA9PT0gMCkge1xyXG4gICAgICAgICAgLy9kb24ndCBkbyBhbnl0aGluZ1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICBuZWlnaGJvdXJfeCA8IDAgfHxcclxuICAgICAgICAgIG5laWdoYm91cl95IDwgMCB8fFxyXG4gICAgICAgICAgbmVpZ2hib3VyX3ggPj0gbWFwLmxlbmd0aCB8fFxyXG4gICAgICAgICAgbmVpZ2hib3VyX3kgPj0gbWFwWzBdLmxlbmd0aFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY291bnQgKz0gMTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcFtuZWlnaGJvdXJfeF1bbmVpZ2hib3VyX3ldKSB7XHJcbiAgICAgICAgICBjb3VudCArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvdW50O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkb1NpbXVsYXRpb25TdGVwKFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgb2xkTWFwOiBib29sZWFuW11bXVxyXG4gICk6IGJvb2xlYW5bXVtdIHtcclxuICAgIGxldCBuZXdNYXA6IGJvb2xlYW5bXVtdID0gW107XHJcbiAgICBsZXQgYmlydGhMaW1pdDogbnVtYmVyID0gNDtcclxuICAgIGxldCBkZWF0aExpbWl0OiBudW1iZXIgPSAzO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHtcclxuICAgICAgbmV3TWFwW2ldID0gW107XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgd2lkdGg7IGorKykge1xyXG4gICAgICAgIG5ld01hcFtpXVtqXSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBvbGRNYXAubGVuZ3RoOyB4KyspIHtcclxuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBvbGRNYXBbMF0ubGVuZ3RoOyB5KyspIHtcclxuICAgICAgICBsZXQgbmJzOiBudW1iZXIgPSB0aGlzLmNvdW50QWxpdmVOZWlnaGJvcnMoeCwgeSwgb2xkTWFwKTtcclxuXHJcbiAgICAgICAgaWYgKG9sZE1hcFt4XVt5XSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgaWYgKG5icyA8IGRlYXRoTGltaXQpIHtcclxuICAgICAgICAgICAgbmV3TWFwW3hdW3ldID0gZmFsc2U7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdNYXBbeF1beV0gPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAobmJzID4gYmlydGhMaW1pdCkge1xyXG4gICAgICAgICAgICBuZXdNYXBbeF1beV0gPSB0cnVlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3TWFwW3hdW3ldID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ld01hcDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGb3Jlc3RNYXBCdWlsZGVyIGltcGxlbWVudHMgTWFwR2VuZXJhdG9yIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBcImZvcmVzdFwiO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldE5hbWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYnVpbGRNYXAoXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBudW1iZXJPZlN0ZXBzOiBudW1iZXJcclxuICApOiBhbnlbXVtdIHtcclxuICAgIGxldCBjZWxsTWFwOiBhbnlbXVtdID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XHJcbiAgICAgIGNlbGxNYXBbaV0gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7XHJcbiAgICAgICAgY2VsbE1hcFtpXVtqXSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2VsbE1hcCA9IHRoaXMuaW5pdGlhbGl6ZU1hcCh3aWR0aCwgaGVpZ2h0LCBjZWxsTWFwKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mU3RlcHM7IGkrKykge1xyXG4gICAgICBjZWxsTWFwID0gdGhpcy5kb1NpbXVsYXRpb25TdGVwKHdpZHRoLCBoZWlnaHQsIGNlbGxNYXApO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgaW4gY2VsbE1hcCkge1xyXG4gICAgICBmb3IgKGxldCBqIGluIGNlbGxNYXBbaV0pIHtcclxuICAgICAgICBpZiAoY2VsbE1hcFtpXVtqXSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgY2VsbE1hcFtpXVtqXSA9IFwiIFwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjZWxsTWFwW2ldW2pdID0gXCIjXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2VsbE1hcDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1hcChcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIG1hcDogYm9vbGVhbltdW11cclxuICApOiBib29sZWFuW11bXSB7XHJcbiAgICBsZXQgY2hhbmNlVG9TdGFydEFsaXZlOiBudW1iZXIgPSAwLjQ7XHJcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcclxuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgY2hhbmNlVG9TdGFydEFsaXZlKSB7XHJcbiAgICAgICAgICBtYXBbeF1beV0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hcDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY291bnRBbGl2ZU5laWdoYm9ycyh4OiBudW1iZXIsIHk6IG51bWJlciwgbWFwOiBib29sZWFuW11bXSk6IG51bWJlciB7XHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IC0xOyBpIDwgMjsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAtMTsgaiA8IDI7IGorKykge1xyXG4gICAgICAgIGxldCBuZWlnaGJvdXJfeDogbnVtYmVyID0geCArIGk7XHJcbiAgICAgICAgbGV0IG5laWdoYm91cl95OiBudW1iZXIgPSB5ICsgajtcclxuXHJcbiAgICAgICAgaWYgKGkgPT09IDAgJiYgaiA9PT0gMCkge1xyXG4gICAgICAgICAgLy9kb24ndCBkbyBhbnl0aGluZ1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICBuZWlnaGJvdXJfeCA8IDAgfHxcclxuICAgICAgICAgIG5laWdoYm91cl95IDwgMCB8fFxyXG4gICAgICAgICAgbmVpZ2hib3VyX3ggPj0gbWFwLmxlbmd0aCB8fFxyXG4gICAgICAgICAgbmVpZ2hib3VyX3kgPj0gbWFwWzBdLmxlbmd0aFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY291bnQgKz0gMTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1hcFtuZWlnaGJvdXJfeF1bbmVpZ2hib3VyX3ldKSB7XHJcbiAgICAgICAgICBjb3VudCArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvdW50O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkb1NpbXVsYXRpb25TdGVwKFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgb2xkTWFwOiBib29sZWFuW11bXVxyXG4gICk6IGJvb2xlYW5bXVtdIHtcclxuICAgIGxldCBuZXdNYXA6IGJvb2xlYW5bXVtdID0gW107XHJcbiAgICBsZXQgYmlydGhMaW1pdDogbnVtYmVyID0gMztcclxuICAgIGxldCBkZWF0aExpbWl0OiBudW1iZXIgPSAzO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHtcclxuICAgICAgbmV3TWFwW2ldID0gW107XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgd2lkdGg7IGorKykge1xyXG4gICAgICAgIG5ld01hcFtpXVtqXSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBvbGRNYXAubGVuZ3RoOyB4KyspIHtcclxuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBvbGRNYXBbMF0ubGVuZ3RoOyB5KyspIHtcclxuICAgICAgICBsZXQgbmJzOiBudW1iZXIgPSB0aGlzLmNvdW50QWxpdmVOZWlnaGJvcnMoeCwgeSwgb2xkTWFwKTtcclxuXHJcbiAgICAgICAgaWYgKG9sZE1hcFt4XVt5XSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgaWYgKG5icyA8IGRlYXRoTGltaXQpIHtcclxuICAgICAgICAgICAgbmV3TWFwW3hdW3ldID0gZmFsc2U7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdNYXBbeF1beV0gPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAobmJzID4gYmlydGhMaW1pdCkge1xyXG4gICAgICAgICAgICBuZXdNYXBbeF1beV0gPSB0cnVlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3TWFwW3hdW3ldID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ld01hcDtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/rogue/mapGenerator.ts\n");

/***/ }),

/***/ "./src/rogue/mapSelector.ts":
/*!**********************************!*\
  !*** ./src/rogue/mapSelector.ts ***!
  \**********************************/
/*! exports provided: MapSelector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MapSelector\", function() { return MapSelector; });\n/* harmony import */ var _geom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geom */ \"./src/rogue/geom.ts\");\n\r\nclass MapSelector {\r\n    constructor(map) {\r\n        this.map = map;\r\n        this.mapWidth = this.map.getWidth();\r\n        this.mapHeight = this.map.getHeight();\r\n        this.tiles = this.map.getTiles();\r\n    }\r\n    //TODO load multiple maps, only display the active map\r\n    getSubMapTiles(radius, centerX, centerY) {\r\n        let subMapTiles = [];\r\n        for (let y = centerY - radius; y < centerY + radius + 1; y++) {\r\n            let subMapRow = [];\r\n            if (y < 0 || y >= this.mapHeight) {\r\n                //a whole row of wall tiles\r\n                for (let i = 0; i < 2 * radius + 1; i++) {\r\n                    subMapRow.push(\"\");\r\n                }\r\n            }\r\n            else {\r\n                for (let x = centerX - radius; x < centerX + radius + 1; x++) {\r\n                    if (x < 0 || x >= this.mapWidth) {\r\n                        subMapRow.push(\"\");\r\n                    }\r\n                    else {\r\n                        let tilePoint = new _geom__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](x, y);\r\n                        subMapRow.push(this.map.getTileType(tilePoint));\r\n                    }\r\n                }\r\n            }\r\n            subMapTiles.push(subMapRow);\r\n        }\r\n        return subMapTiles;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvbWFwU2VsZWN0b3IudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcm9ndWUvbWFwU2VsZWN0b3IudHM/YTMyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBtYXAgZnJvbSBcIi4vbWFwXCI7XHJcbmltcG9ydCAqIGFzIGdlb20gZnJvbSBcIi4vZ2VvbVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hcFNlbGVjdG9yIHtcclxuICBtYXA6IG1hcC5JTWFwO1xyXG4gIG1hcFdpZHRoOiBudW1iZXI7XHJcbiAgbWFwSGVpZ2h0OiBudW1iZXI7XHJcbiAgdGlsZXM6IGFueVtdO1xyXG4gIGNvbnN0cnVjdG9yKG1hcDogbWFwLklNYXApIHtcclxuICAgIHRoaXMubWFwID0gbWFwO1xyXG4gICAgdGhpcy5tYXBXaWR0aCA9IHRoaXMubWFwLmdldFdpZHRoKCk7XHJcbiAgICB0aGlzLm1hcEhlaWdodCA9IHRoaXMubWFwLmdldEhlaWdodCgpO1xyXG4gICAgdGhpcy50aWxlcyA9IHRoaXMubWFwLmdldFRpbGVzKCk7XHJcbiAgfVxyXG5cclxuICAvL1RPRE8gbG9hZCBtdWx0aXBsZSBtYXBzLCBvbmx5IGRpc3BsYXkgdGhlIGFjdGl2ZSBtYXBcclxuXHJcbiAgcHVibGljIGdldFN1Yk1hcFRpbGVzKFxyXG4gICAgcmFkaXVzOiBudW1iZXIsXHJcbiAgICBjZW50ZXJYOiBudW1iZXIsXHJcbiAgICBjZW50ZXJZOiBudW1iZXJcclxuICApOiBhbnlbXSB7XHJcbiAgICBsZXQgc3ViTWFwVGlsZXM6IGFueVtdID0gW107XHJcbiAgICBmb3IgKGxldCB5ID0gY2VudGVyWSAtIHJhZGl1czsgeSA8IGNlbnRlclkgKyByYWRpdXMgKyAxOyB5KyspIHtcclxuICAgICAgbGV0IHN1Yk1hcFJvdzogYW55W10gPSBbXTtcclxuICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5tYXBIZWlnaHQpIHtcclxuICAgICAgICAvL2Egd2hvbGUgcm93IG9mIHdhbGwgdGlsZXNcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIgKiByYWRpdXMgKyAxOyBpKyspIHtcclxuICAgICAgICAgIHN1Yk1hcFJvdy5wdXNoKFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3IgKGxldCB4ID0gY2VudGVyWCAtIHJhZGl1czsgeCA8IGNlbnRlclggKyByYWRpdXMgKyAxOyB4KyspIHtcclxuICAgICAgICAgIGlmICh4IDwgMCB8fCB4ID49IHRoaXMubWFwV2lkdGgpIHtcclxuICAgICAgICAgICAgc3ViTWFwUm93LnB1c2goXCJcIik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgdGlsZVBvaW50ID0gbmV3IGdlb20uUG9pbnQoeCwgeSk7XHJcbiAgICAgICAgICAgIHN1Yk1hcFJvdy5wdXNoKHRoaXMubWFwLmdldFRpbGVUeXBlKHRpbGVQb2ludCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBzdWJNYXBUaWxlcy5wdXNoKHN1Yk1hcFJvdyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3ViTWFwVGlsZXM7XHJcbiAgfVxyXG5cclxuICAvL1RPRE8gZ2V0IHJlbGF0aXZlIHBvc2l0aW9ucyBvZiBvdGhlciBlbnRpdGllcyA/Pz8gb3IgbWF5YmUgbm90IGluIHRoaXMgY2xhc3NcclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/rogue/mapSelector.ts\n");

/***/ }),

/***/ "./src/rogue/renderer.ts":
/*!*******************************!*\
  !*** ./src/rogue/renderer.ts ***!
  \*******************************/
/*! exports provided: CanvasMapRenderer, RenderLayer, Effects */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CanvasMapRenderer\", function() { return CanvasMapRenderer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RenderLayer\", function() { return RenderLayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Effects\", function() { return Effects; });\nclass CanvasMapRenderer {\r\n    constructor(canvas, tileRect) {\r\n        this.canvas = canvas;\r\n        this.tileRect = tileRect;\r\n        this.target = this.canvas.getContext(\"2d\");\r\n    }\r\n    draw(layers) {\r\n        this.clearMap();\r\n        for (let i in layers) {\r\n            let layer = layers[i];\r\n            let tiles = layer.getTiles();\r\n            let effects = layer.getEffects();\r\n            let row;\r\n            let column;\r\n            let total = tiles.length;\r\n            let rowWidth = tiles[0].length;\r\n            let currentTile;\r\n            for (row = 0; row < total; row++) {\r\n                for (column = 0; column < rowWidth; column++) {\r\n                    currentTile = tiles[row][column];\r\n                    this.drawTile(column, row, currentTile, effects);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    drawTile(column, row, currentTile, effects) {\r\n        //change tileRect's x,y pos\r\n        this.tileRect.x = column * this.tileRect.width;\r\n        this.tileRect.y = row * this.tileRect.height;\r\n        //draw tile to canvas\r\n        if (currentTile !== \"\") {\r\n            this.target.fillStyle = this.tileColor(currentTile);\r\n            if (effects.length > 0) {\r\n                for (let j in effects) {\r\n                    let effect = effects[j];\r\n                    switch (effect) {\r\n                        case Effects.Fog:\r\n                            this.target.fillStyle = this.shadeColor2(this.target.fillStyle, -0.65);\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            this.target.fillRect(this.tileRect.x, this.tileRect.y, this.tileRect.width, this.tileRect.height);\r\n            //draw outline\r\n            this.target.strokeStyle = \"black\";\r\n            this.target.strokeRect(this.tileRect.x, this.tileRect.y, this.tileRect.width, this.tileRect.height);\r\n        }\r\n    }\r\n    clearMap() {\r\n        this.canvas.width = this.canvas.width;\r\n    }\r\n    tileColor(value) {\r\n        switch (value) {\r\n            case \"#\":\r\n                return \"#2b303b\";\r\n                break;\r\n            case \" \":\r\n                return \"#e4e4e4\";\r\n                break;\r\n            case \"@\":\r\n                return \"#ff503a\";\r\n                break;\r\n            default:\r\n                return \"#000000\";\r\n        }\r\n    }\r\n    shadeColor2(color, percent) {\r\n        var f = parseInt(color.slice(1), 16), t = percent < 0 ? 0 : 255, p = percent < 0 ? percent * -1 : percent, R = f >> 16, G = (f >> 8) & 0x00ff, B = f & 0x0000ff;\r\n        return (\"#\" +\r\n            (0x1000000 +\r\n                (Math.round((t - R) * p) + R) * 0x10000 +\r\n                (Math.round((t - G) * p) + G) * 0x100 +\r\n                (Math.round((t - B) * p) + B))\r\n                .toString(16)\r\n                .slice(1));\r\n    }\r\n    blendColors(c0, c1, p) {\r\n        var f = parseInt(c0.slice(1), 16), t = parseInt(c1.slice(1), 16), R1 = f >> 16, G1 = (f >> 8) & 0x00ff, B1 = f & 0x0000ff, R2 = t >> 16, G2 = (t >> 8) & 0x00ff, B2 = t & 0x0000ff;\r\n        return (\"#\" +\r\n            (0x1000000 +\r\n                (Math.round((R2 - R1) * p) + R1) * 0x10000 +\r\n                (Math.round((G2 - G1) * p) + G1) * 0x100 +\r\n                (Math.round((B2 - B1) * p) + B1))\r\n                .toString(16)\r\n                .slice(1));\r\n    }\r\n}\r\nclass RenderLayer {\r\n    constructor(tiles, effects) {\r\n        this.tiles = tiles;\r\n        this.effects = effects;\r\n    }\r\n    getTiles() {\r\n        return this.tiles;\r\n    }\r\n    getEffects() {\r\n        return this.effects;\r\n    }\r\n}\r\nvar Effects;\r\n(function (Effects) {\r\n    Effects[Effects[\"Fog\"] = 1] = \"Fog\";\r\n})(Effects || (Effects = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9ndWUvcmVuZGVyZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcm9ndWUvcmVuZGVyZXIudHM/OTU2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBnZW9tIGZyb20gXCIuL2dlb21cIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU1hcFJlbmRlcmVyIHtcclxuICBkcmF3KGxheWVyczogYW55W10pOiB2b2lkO1xyXG4gIGRyYXdUaWxlKFxyXG4gICAgY29sdW1uOiBudW1iZXIsXHJcbiAgICByb3c6IG51bWJlcixcclxuICAgIGN1cnJlbnRUaWxlOiBzdHJpbmcsXHJcbiAgICBlZmZlY3RzOiBudW1iZXJbXVxyXG4gICk6IHZvaWQ7XHJcbiAgY2xlYXJNYXAoKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENhbnZhc01hcFJlbmRlcmVyIGltcGxlbWVudHMgSU1hcFJlbmRlcmVyIHtcclxuICB0YXJnZXQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcclxuICAgIHByaXZhdGUgdGlsZVJlY3Q6IGdlb20uUmVjdGFuZ2xlXHJcbiAgKSB7XHJcbiAgICB0aGlzLnRhcmdldCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkcmF3KGxheWVyczogUmVuZGVyTGF5ZXJbXSk6IHZvaWQge1xyXG4gICAgdGhpcy5jbGVhck1hcCgpO1xyXG4gICAgZm9yIChsZXQgaSBpbiBsYXllcnMpIHtcclxuICAgICAgbGV0IGxheWVyOiBSZW5kZXJMYXllciA9IGxheWVyc1tpXTtcclxuICAgICAgbGV0IHRpbGVzID0gbGF5ZXIuZ2V0VGlsZXMoKTtcclxuICAgICAgbGV0IGVmZmVjdHMgPSBsYXllci5nZXRFZmZlY3RzKCk7XHJcblxyXG4gICAgICBsZXQgcm93OiBudW1iZXI7XHJcbiAgICAgIGxldCBjb2x1bW46IG51bWJlcjtcclxuICAgICAgbGV0IHRvdGFsOiBudW1iZXIgPSB0aWxlcy5sZW5ndGg7XHJcbiAgICAgIGxldCByb3dXaWR0aDogbnVtYmVyID0gdGlsZXNbMF0ubGVuZ3RoO1xyXG4gICAgICBsZXQgY3VycmVudFRpbGU6IHN0cmluZztcclxuXHJcbiAgICAgIGZvciAocm93ID0gMDsgcm93IDwgdG90YWw7IHJvdysrKSB7XHJcbiAgICAgICAgZm9yIChjb2x1bW4gPSAwOyBjb2x1bW4gPCByb3dXaWR0aDsgY29sdW1uKyspIHtcclxuICAgICAgICAgIGN1cnJlbnRUaWxlID0gdGlsZXNbcm93XVtjb2x1bW5dO1xyXG4gICAgICAgICAgdGhpcy5kcmF3VGlsZShjb2x1bW4sIHJvdywgY3VycmVudFRpbGUsIGVmZmVjdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXdUaWxlKFxyXG4gICAgY29sdW1uOiBudW1iZXIsXHJcbiAgICByb3c6IG51bWJlcixcclxuICAgIGN1cnJlbnRUaWxlOiBzdHJpbmcsXHJcbiAgICBlZmZlY3RzOiBudW1iZXJbXVxyXG4gICk6IHZvaWQge1xyXG4gICAgLy9jaGFuZ2UgdGlsZVJlY3QncyB4LHkgcG9zXHJcbiAgICB0aGlzLnRpbGVSZWN0LnggPSBjb2x1bW4gKiB0aGlzLnRpbGVSZWN0LndpZHRoO1xyXG4gICAgdGhpcy50aWxlUmVjdC55ID0gcm93ICogdGhpcy50aWxlUmVjdC5oZWlnaHQ7XHJcbiAgICAvL2RyYXcgdGlsZSB0byBjYW52YXNcclxuICAgIGlmIChjdXJyZW50VGlsZSAhPT0gXCJcIikge1xyXG4gICAgICB0aGlzLnRhcmdldC5maWxsU3R5bGUgPSB0aGlzLnRpbGVDb2xvcihjdXJyZW50VGlsZSk7XHJcblxyXG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiBpbiBlZmZlY3RzKSB7XHJcbiAgICAgICAgICBsZXQgZWZmZWN0OiBudW1iZXIgPSBlZmZlY3RzW2pdO1xyXG4gICAgICAgICAgc3dpdGNoIChlZmZlY3QpIHtcclxuICAgICAgICAgICAgY2FzZSBFZmZlY3RzLkZvZzpcclxuICAgICAgICAgICAgICB0aGlzLnRhcmdldC5maWxsU3R5bGUgPSB0aGlzLnNoYWRlQ29sb3IyKFxyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuZmlsbFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgLTAuNjVcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy50YXJnZXQuZmlsbFJlY3QoXHJcbiAgICAgICAgdGhpcy50aWxlUmVjdC54LFxyXG4gICAgICAgIHRoaXMudGlsZVJlY3QueSxcclxuICAgICAgICB0aGlzLnRpbGVSZWN0LndpZHRoLFxyXG4gICAgICAgIHRoaXMudGlsZVJlY3QuaGVpZ2h0XHJcbiAgICAgICk7XHJcbiAgICAgIC8vZHJhdyBvdXRsaW5lXHJcbiAgICAgIHRoaXMudGFyZ2V0LnN0cm9rZVN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgICB0aGlzLnRhcmdldC5zdHJva2VSZWN0KFxyXG4gICAgICAgIHRoaXMudGlsZVJlY3QueCxcclxuICAgICAgICB0aGlzLnRpbGVSZWN0LnksXHJcbiAgICAgICAgdGhpcy50aWxlUmVjdC53aWR0aCxcclxuICAgICAgICB0aGlzLnRpbGVSZWN0LmhlaWdodFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGNsZWFyTWFwKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdGlsZUNvbG9yKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICBjYXNlIFwiI1wiOlxyXG4gICAgICAgIHJldHVybiBcIiMyYjMwM2JcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIiBcIjpcclxuICAgICAgICByZXR1cm4gXCIjZTRlNGU0XCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJAXCI6XHJcbiAgICAgICAgcmV0dXJuIFwiI2ZmNTAzYVwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBcIiMwMDAwMDBcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2hhZGVDb2xvcjIoY29sb3IsIHBlcmNlbnQpOiBzdHJpbmcge1xyXG4gICAgdmFyIGYgPSBwYXJzZUludChjb2xvci5zbGljZSgxKSwgMTYpLFxyXG4gICAgICB0ID0gcGVyY2VudCA8IDAgPyAwIDogMjU1LFxyXG4gICAgICBwID0gcGVyY2VudCA8IDAgPyBwZXJjZW50ICogLTEgOiBwZXJjZW50LFxyXG4gICAgICBSID0gZiA+PiAxNixcclxuICAgICAgRyA9IChmID4+IDgpICYgMHgwMGZmLFxyXG4gICAgICBCID0gZiAmIDB4MDAwMGZmO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgXCIjXCIgK1xyXG4gICAgICAoXHJcbiAgICAgICAgMHgxMDAwMDAwICtcclxuICAgICAgICAoTWF0aC5yb3VuZCgodCAtIFIpICogcCkgKyBSKSAqIDB4MTAwMDAgK1xyXG4gICAgICAgIChNYXRoLnJvdW5kKCh0IC0gRykgKiBwKSArIEcpICogMHgxMDAgK1xyXG4gICAgICAgIChNYXRoLnJvdW5kKCh0IC0gQikgKiBwKSArIEIpXHJcbiAgICAgIClcclxuICAgICAgICAudG9TdHJpbmcoMTYpXHJcbiAgICAgICAgLnNsaWNlKDEpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBibGVuZENvbG9ycyhjMCwgYzEsIHApOiBzdHJpbmcge1xyXG4gICAgdmFyIGYgPSBwYXJzZUludChjMC5zbGljZSgxKSwgMTYpLFxyXG4gICAgICB0ID0gcGFyc2VJbnQoYzEuc2xpY2UoMSksIDE2KSxcclxuICAgICAgUjEgPSBmID4+IDE2LFxyXG4gICAgICBHMSA9IChmID4+IDgpICYgMHgwMGZmLFxyXG4gICAgICBCMSA9IGYgJiAweDAwMDBmZixcclxuICAgICAgUjIgPSB0ID4+IDE2LFxyXG4gICAgICBHMiA9ICh0ID4+IDgpICYgMHgwMGZmLFxyXG4gICAgICBCMiA9IHQgJiAweDAwMDBmZjtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIFwiI1wiICtcclxuICAgICAgKFxyXG4gICAgICAgIDB4MTAwMDAwMCArXHJcbiAgICAgICAgKE1hdGgucm91bmQoKFIyIC0gUjEpICogcCkgKyBSMSkgKiAweDEwMDAwICtcclxuICAgICAgICAoTWF0aC5yb3VuZCgoRzIgLSBHMSkgKiBwKSArIEcxKSAqIDB4MTAwICtcclxuICAgICAgICAoTWF0aC5yb3VuZCgoQjIgLSBCMSkgKiBwKSArIEIxKVxyXG4gICAgICApXHJcbiAgICAgICAgLnRvU3RyaW5nKDE2KVxyXG4gICAgICAgIC5zbGljZSgxKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJMYXllciB7XHJcbiAgdGlsZXM6IGFueVtdO1xyXG4gIGVmZmVjdHM6IG51bWJlcltdO1xyXG4gIGNvbnN0cnVjdG9yKHRpbGVzOiBhbnlbXSwgZWZmZWN0czogbnVtYmVyW10pIHtcclxuICAgIHRoaXMudGlsZXMgPSB0aWxlcztcclxuICAgIHRoaXMuZWZmZWN0cyA9IGVmZmVjdHM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0VGlsZXMoKTogYW55W10ge1xyXG4gICAgcmV0dXJuIHRoaXMudGlsZXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0RWZmZWN0cygpOiBudW1iZXJbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5lZmZlY3RzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gRWZmZWN0cyB7XHJcbiAgRm9nID0gMSxcclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/rogue/renderer.ts\n");

/***/ })

/******/ });
//# sourceMappingURL=bundle.js.map